define("apps/common/views/genericItemView",["apps/master/masterApp","modules/mixins/backgroundImage-b29c3fef","imagesLoaded"],function(e,t){"use strict";return Marionette.ItemView.extend({beyondWindowHeightOffset:0,png:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIW2NkAAIAAAoAAggA9GkAAAAASUVORK5CYII=",constructor:function(){var i=this;Marionette.ItemView.apply(i,arguments),i.listenTo(i,"destroy",i.handleOnDestroy),i.listenTo(e.vent,"window:scrolled",i._handleScrolledOnScreen),t(i)},onRender:function(){var e,t=this;t.options.attach?Marionette.triggerMethodOn(t,"show"):(e=t.$el.children(),1===e.size()&&(t.$el=e,t.setElement(t.$el))),t.$el.attr("cid",t.cid),t._manageImageLoading()},_handleScrolledOnScreen:function(t){var i=this,n=0,o=e.windowManager.windowHeight,s=t.currentScrollPos+o+n;Math.round(i.$el.offset().top)<=s&&(i.stopListening(e.vent,"window:scrolled",i._handleScrolledOnScreen),i.trigger("onScreen"),i._handleImageWipeIn(),i._manageImageLoading())},_handleImageWipeIn:function(){var e=this;setTimeout(function(){e.$el.find(".load-image-wipe").addClass("loaded")},500)},_manageImageLoading:function(){var e,t=this;t._manageImageLoading=$.noop,e=$([]),e=e.add(t._getBackgroundImages()).add(t._getInlineImages()),0===e.length?_.defer(function(){t.triggerImagesLoadedEvent()}):t._handeDetectedImages(e)},_handeDetectedImages:function(t){var i=this,n=_.once(_.bind(i.triggerImagesLoadedEvent,i));i.$el.addClass("module--is-loading"),i._loadImages(t,n),i.timeOut=setTimeout(function(){n()},e.config.imagesLoadedTimeout)},_loadImages:function(e,t){var i=this;e.imagesLoaded().progress(function(e,t){var i=t.isLoaded?"loaded":"broken",n=$(t.img),o=n.data();"loaded"===i&&(o.$el&&o.$el.css("background-image","url("+t.img.src+")"),$.removeData(n,"image-type"),$.removeData(n,"$el"))}).always(function(){i.$el.addClass("module--is-loaded").removeClass("module--is-loading"),t()})},_getInlineImages:function(){return this.$el.find("img").data("image-type","inline")},_getBackgroundImages:function(){var e=this,t=$(),i="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend";return e.$el.find(".lazy-load-bg-img").addBack().addClass("lazy-load-bg-transition").removeClass("lazy-load-bg-img").one(i,function(){$(this).removeClass("lazy-load-bg-transition")}).filter(function(){return this.currentStyle?"none"!==this.currentStyle.backgroundImage:window.getComputedStyle?"none"!==document.defaultView.getComputedStyle(this,null).getPropertyValue("background-image"):void 0}).each(function(){var i=$(this),n=i.css("background-image"),o=null,s=$("<img>");n?(o=n.match(/url\((['"])?(.*?)\1\)/),o&&(s.data("image-type","bg").data("$el",i),i.css("background-image","url("+e.png+")"),t=t.add(s.attr("src",o.pop())))):o=null}),t},triggerImagesLoadedEvent:function(){var e=this;e.timeOut&&clearTimeout(e.timeOut),e.trigger("images:loaded",e)}})}),define("apps/common/views/pictureFillItemView",["apps/master/masterApp","apps/common/views/genericItemView","modules/pictureFill"],function(e,t,i){"use strict";return t.extend({constructor:function(){var e=this;t.apply(e,arguments),e.listenTo(e,"show",e.handleOnShow),e.listenTo(e,"destroy",e.handleOnDestroy),e.listenTo(e,"pictureFill",e.handleOnPictureFill)},handleOnShow:function(){var e=this;e.pictureFill=new i(e.el),e.trigger("pictureFill")},handleOnDestroy:function(){var e=this;e.pictureFill&&e.pictureFill.destroy&&e.pictureFill.destroy()},handleOnPictureFill:function(){this.pictureFill.build()}})}),define("apps/common/views/carouselItemView",["apps/master/masterApp","apps/common/views/pictureFillItemView","modules/carousel"],function(e,t,i){"use strict";return t.extend({children:[],carouselOptions:{work:{center:!0,itemsCustom:[[0,1],[512,1.5],[848,2.5],[1200,3.5]]},news:{center:!0,itemsCustom:[[0,1],[512,1.5],[848,2.5],[1200,3.5]]},main:{navigation:!0,center:!0,itemsCustom:[[0,1],[450,1],[550,1],[1600,1]]},casestudy:{navigation:!0,center:!0,modestbranding:1,itemsCustom:[[0,1],[450,1],[550,1],[1600,1]]},posters:{navigation:!0,margin:200,center:!0,stagePadding:300,itemsCustom:[[0,1],[450,1],[848,1],[1600,1]]}},carousel:null,useOptions:{},initialize:function(e){var t=this;t.useOptions=t.carouselOptions[e.type.split("-")[1]],t.useOptions.autoPlay=Modernizr.touch?5e3:!1,t.useOptions.carouselMove=function(){t.trigger("carousel:beforUpdate",arguments)}},startCarousel:function(){var e=this;e.carousel=new i(e.useOptions)},onShow:function(){var e=this;e.useOptions.selector=e.$el.find(".carousel"),e.sniffOutChildViews(),e.startCarousel()},onDestroy:function(){for(var e=this,t=e.children,i=t.length,n=0;i>n;n++){var o=t[n];e.stopListening(o,"video:playing"),e.stopListening(o,"video:paused"),o.destroy()}e.carousel.destroy(),delete e.carousel},sniffOutChildViews:function(){var t=this,i=t.useOptions.selector.children(),n=[];i.each(function(i,o){var s,r,a=$(o),l=a.data("type");l&&(s=e.getItemViews(l),r=new s({el:o,type:l,attach:t.options.attach}),r.triggerMethod("before:render",r),t.children.push(r),r.bindUIElements(),Marionette.triggerMethodOn(r,"render"),t.listenToView(r),"videoPlayer"===l&&n.push(r))}),t.listenTo(t,"carousel:beforUpdate",function(){_.each(n,function(e){e.trigger("video:pause")})})},listenToView:function(e){var t=this;t.listenTo(e,"video:playing",function(){t.carousel.hideArrows()}),t.listenTo(e,"video:paused",function(){t.carousel.showArrows()})}})}),function(e){function t(e,t,i){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:i;default:throw new Error("Implement me")}}function i(e,t){return Me.call(e,t)}function n(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function o(e){_e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&0}function s(e,t){var i=!0;return h(function(){return i&&(o(e),i=!1),t.apply(this,arguments)},t)}function r(e,t){gt[e]||(o(t),gt[e]=!0)}function a(e,t){return function(i){return m(e.call(this,i),t)}}function l(e,t){return function(i){return this.localeData().ordinal(e.call(this,i),t)}}function c(){}function u(e,t){t!==!1&&L(e),f(this,e),this._d=new Date(+e._d)}function d(e){var t=k(e),i=t.year||0,n=t.quarter||0,o=t.month||0,s=t.week||0,r=t.day||0,a=t.hour||0,l=t.minute||0,c=t.second||0,u=t.millisecond||0;this._milliseconds=+u+1e3*c+6e4*l+36e5*a,this._days=+r+7*s,this._months=+o+3*n+12*i,this._data={},this._locale=_e.localeData(),this._bubble()}function h(e,t){for(var n in t)i(t,n)&&(e[n]=t[n]);return i(t,"toString")&&(e.toString=t.toString),i(t,"valueOf")&&(e.valueOf=t.valueOf),e}function f(e,t){var i,n,o;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),ze.length>0)for(i in ze)n=ze[i],o=t[n],"undefined"!=typeof o&&(e[n]=o);return e}function p(e){return 0>e?Math.ceil(e):Math.floor(e)}function m(e,t,i){for(var n=""+Math.abs(e),o=e>=0;n.length<t;)n="0"+n;return(o?i?"+":"":"-")+n}function g(e,t){var i={milliseconds:0,months:0};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function y(e,t){var i;return t=E(t,e),e.isBefore(t)?i=g(e,t):(i=g(t,e),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function v(e,t){return function(i,n){var o,s;return null===n||isNaN(+n)||(r(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),s=i,i=n,n=s),i="string"==typeof i?+i:i,o=_e.duration(i,n),_(this,o,e),this}}function _(e,t,i,n){var o=t._milliseconds,s=t._days,r=t._months;n=null==n?!0:n,o&&e._d.setTime(+e._d+o*i),s&&fe(e,"Date",he(e,"Date")+s*i),r&&de(e,he(e,"Month")+r*i),n&&_e.updateOffset(e,s||r)}function w(e){return"[object Array]"===Object.prototype.toString.call(e)}function b(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function T(e,t,i){var n,o=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),r=0;for(n=0;o>n;n++)(i&&e[n]!==t[n]||!i&&$(e[n])!==$(t[n]))&&r++;return r+s}function C(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=ct[e]||ut[t]||t}return e}function k(e){var t,n,o={};for(n in e)i(e,n)&&(t=C(n),t&&(o[t]=e[n]));return o}function M(t){var i,n;if(0===t.indexOf("week"))i=7,n="day";else{if(0!==t.indexOf("month"))return;i=12,n="month"}_e[t]=function(o,s){var r,a,l=_e._locale[t],c=[];if("number"==typeof o&&(s=o,o=e),a=function(e){var t=_e().utc().set(n,e);return l.call(_e._locale,t,o||"")},null!=s)return a(s);for(r=0;i>r;r++)c.push(a(r));return c}}function $(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=t>=0?Math.floor(t):Math.ceil(t)),i}function S(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function D(e,t,i){return ae(_e([e,11,31+t-i]),t,i).week}function I(e){return P(e)?366:365}function P(e){return e%4===0&&e%100!==0||e%400===0}function L(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[Se]<0||e._a[Se]>11?Se:e._a[De]<1||e._a[De]>S(e._a[$e],e._a[Se])?De:e._a[Ie]<0||e._a[Ie]>24||24===e._a[Ie]&&(0!==e._a[Pe]||0!==e._a[Le]||0!==e._a[Oe])?Ie:e._a[Pe]<0||e._a[Pe]>59?Pe:e._a[Le]<0||e._a[Le]>59?Le:e._a[Oe]<0||e._a[Oe]>999?Oe:-1,e._pf._overflowDayOfYear&&($e>t||t>De)&&(t=De),e._pf.overflow=t)}function O(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length&&t._pf.bigHour===e)),t._isValid}function x(e){return e?e.toLowerCase().replace("_","-"):e}function z(e){for(var t,i,n,o,s=0;s<e.length;){for(o=x(e[s]).split("-"),t=o.length,i=x(e[s+1]),i=i?i.split("-"):null;t>0;){if(n=Y(o.slice(0,t).join("-")))return n;if(i&&i.length>=t&&T(o,i,!0)>=t-1)break;t--}s++}return null}function Y(e){var t=null;if(!xe[e]&&Ye)try{t=_e.locale(),require("./locale/"+e),_e.locale(t)}catch(i){}return xe[e]}function E(e,t){var i,n;return t._isUTC?(i=t.clone(),n=(_e.isMoment(e)||b(e)?+e:+_e(e))-+i,i._d.setTime(+i._d+n),_e.updateOffset(i,!1),i):_e(e).local()}function V(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function A(e){var t,i,n=e.match(Fe);for(t=0,i=n.length;i>t;t++)mt[n[t]]?n[t]=mt[n[t]]:n[t]=V(n[t]);return function(o){var s="";for(t=0;i>t;t++)s+=n[t]instanceof Function?n[t].call(o,e):n[t];return s}}function F(e,t){return e.isValid()?(t=W(t,e.localeData()),dt[t]||(dt[t]=A(t)),dt[t](e)):e.localeData().invalidDate()}function W(e,t){function i(e){return t.longDateFormat(e)||e}var n=5;for(We.lastIndex=0;n>=0&&We.test(e);)e=e.replace(We,i),We.lastIndex=0,n-=1;return e}function H(e,t){var i,n=t._strict;switch(e){case"Q":return Qe;case"DDDD":return Ke;case"YYYY":case"GGGG":case"gggg":return n?et:Be;case"Y":case"G":case"g":return it;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?tt:Re;case"S":if(n)return Qe;case"SS":if(n)return Je;case"SSS":if(n)return Ke;case"DDD":return Ue;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ge;case"a":case"A":return t._locale._meridiemParse;case"x":return Ze;case"X":return Xe;case"Z":case"ZZ":return je;case"T":return qe;case"SSSS":return Ne;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?Je:He;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return He;case"Do":return n?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return i=new RegExp(X(Z(e.replace("\\","")),"i"))}}function U(e){e=e||"";var t=e.match(je)||[],i=t[t.length-1]||[],n=(i+"").match(at)||["-",0,0],o=+(60*n[1])+$(n[2]);return"+"===n[0]?-o:o}function B(e,t,i){var n,o=i._a;switch(e){case"Q":null!=t&&(o[Se]=3*($(t)-1));break;case"M":case"MM":null!=t&&(o[Se]=$(t)-1);break;case"MMM":case"MMMM":n=i._locale.monthsParse(t,e,i._strict),null!=n?o[Se]=n:i._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(o[De]=$(t));break;case"Do":null!=t&&(o[De]=$(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=t&&(i._dayOfYear=$(t));break;case"YY":o[$e]=_e.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":o[$e]=$(t);break;case"a":case"A":i._isPm=i._locale.isPM(t);break;case"h":case"hh":i._pf.bigHour=!0;case"H":case"HH":o[Ie]=$(t);break;case"m":case"mm":o[Pe]=$(t);break;case"s":case"ss":o[Le]=$(t);break;case"S":case"SS":case"SSS":case"SSSS":o[Oe]=$(1e3*("0."+t));break;case"x":i._d=new Date($(t));break;case"X":i._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=U(t);break;case"dd":case"ddd":case"dddd":n=i._locale.weekdaysParse(t),null!=n?(i._w=i._w||{},i._w.d=n):i._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(i._w=i._w||{},i._w[e]=$(t));break;case"gg":case"GG":i._w=i._w||{},i._w[e]=_e.parseTwoDigitYear(t)}}function R(e){var i,n,o,s,r,a,l;i=e._w,null!=i.GG||null!=i.W||null!=i.E?(r=1,a=4,n=t(i.GG,e._a[$e],ae(_e(),1,4).year),o=t(i.W,1),s=t(i.E,1)):(r=e._locale._week.dow,a=e._locale._week.doy,n=t(i.gg,e._a[$e],ae(_e(),r,a).year),o=t(i.w,1),null!=i.d?(s=i.d,r>s&&++o):s=null!=i.e?i.e+r:r),l=le(n,o,s,a,r),e._a[$e]=l.year,e._dayOfYear=l.dayOfYear}function N(e){var i,n,o,s,r=[];if(!e._d){for(o=j(e),e._w&&null==e._a[De]&&null==e._a[Se]&&R(e),e._dayOfYear&&(s=t(e._a[$e],o[$e]),e._dayOfYear>I(s)&&(e._pf._overflowDayOfYear=!0),n=ne(s,0,e._dayOfYear),e._a[Se]=n.getUTCMonth(),e._a[De]=n.getUTCDate()),i=0;3>i&&null==e._a[i];++i)e._a[i]=r[i]=o[i];for(;7>i;i++)e._a[i]=r[i]=null==e._a[i]?2===i?1:0:e._a[i];24===e._a[Ie]&&0===e._a[Pe]&&0===e._a[Le]&&0===e._a[Oe]&&(e._nextDay=!0,e._a[Ie]=0),e._d=(e._useUTC?ne:ie).apply(null,r),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm),e._nextDay&&(e._a[Ie]=24)}}function G(e){var t;e._d||(t=k(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],N(e))}function j(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function q(t){if(t._f===_e.ISO_8601)return void J(t);t._a=[],t._pf.empty=!0;var i,n,o,s,r,a=""+t._i,l=a.length,c=0;for(o=W(t._f,t._locale).match(Fe)||[],i=0;i<o.length;i++)s=o[i],n=(a.match(H(s,t))||[])[0],n&&(r=a.substr(0,a.indexOf(n)),r.length>0&&t._pf.unusedInput.push(r),a=a.slice(a.indexOf(n)+n.length),c+=n.length),mt[s]?(n?t._pf.empty=!1:t._pf.unusedTokens.push(s),B(s,n,t)):t._strict&&!n&&t._pf.unusedTokens.push(s);t._pf.charsLeftOver=l-c,a.length>0&&t._pf.unusedInput.push(a),t._pf.bigHour===!0&&t._a[Ie]<=12&&(t._pf.bigHour=e),t._isPm&&t._a[Ie]<12&&(t._a[Ie]+=12),t._isPm===!1&&12===t._a[Ie]&&(t._a[Ie]=0),N(t),L(t)}function Z(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,o){return t||i||n||o})}function X(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(e){var t,i,o,s,r;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(NaN));for(s=0;s<e._f.length;s++)r=0,t=f({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=n(),t._f=e._f[s],q(t),O(t)&&(r+=t._pf.charsLeftOver,r+=10*t._pf.unusedTokens.length,t._pf.score=r,(null==o||o>r)&&(o=r,i=t));h(e,i||t)}function J(e){var t,i,n=e._i,o=nt.exec(n);if(o){for(e._pf.iso=!0,t=0,i=st.length;i>t;t++)if(st[t][1].exec(n)){e._f=st[t][0]+(o[6]||" ");break}for(t=0,i=rt.length;i>t;t++)if(rt[t][1].exec(n)){e._f+=rt[t][0];break}n.match(je)&&(e._f+="Z"),q(e)}else e._isValid=!1}function K(e){J(e),e._isValid===!1&&(delete e._isValid,_e.createFromInputFallback(e))}function ee(e,t){var i,n=[];for(i=0;i<e.length;++i)n.push(t(e[i],i));return n}function te(t){var i,n=t._i;n===e?t._d=new Date:b(n)?t._d=new Date(+n):null!==(i=Ee.exec(n))?t._d=new Date(+i[1]):"string"==typeof n?K(t):w(n)?(t._a=ee(n.slice(0),function(e){return parseInt(e,10)}),N(t)):"object"==typeof n?G(t):"number"==typeof n?t._d=new Date(n):_e.createFromInputFallback(t)}function ie(e,t,i,n,o,s,r){var a=new Date(e,t,i,n,o,s,r);return 1970>e&&a.setFullYear(e),a}function ne(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function oe(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function se(e,t,i,n,o){return o.relativeTime(t||1,!!i,e,n)}function re(e,t,i){var n=_e.duration(e).abs(),o=ke(n.as("s")),s=ke(n.as("m")),r=ke(n.as("h")),a=ke(n.as("d")),l=ke(n.as("M")),c=ke(n.as("y")),u=o<ht.s&&["s",o]||1===s&&["m"]||s<ht.m&&["mm",s]||1===r&&["h"]||r<ht.h&&["hh",r]||1===a&&["d"]||a<ht.d&&["dd",a]||1===l&&["M"]||l<ht.M&&["MM",l]||1===c&&["y"]||["yy",c];return u[2]=t,u[3]=+e>0,u[4]=i,se.apply({},u)}function ae(e,t,i){var n,o=i-t,s=i-e.day();return s>o&&(s-=7),o-7>s&&(s+=7),n=_e(e).add(s,"d"),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function le(e,t,i,n,o){var s,r,a=ne(e,0,1).getUTCDay();return a=0===a?7:a,i=null!=i?i:o,s=o-a+(a>n?7:0)-(o>a?7:0),r=7*(t-1)+(i-o)+s+1,{year:r>0?e:e-1,dayOfYear:r>0?r:I(e-1)+r}}function ce(t){var i,n=t._i,o=t._f;return t._locale=t._locale||_e.localeData(t._l),null===n||o===e&&""===n?_e.invalid({nullInput:!0}):("string"==typeof n&&(t._i=n=t._locale.preparse(n)),_e.isMoment(n)?new u(n,!0):(o?w(o)?Q(t):q(t):te(t),i=new u(t),i._nextDay&&(i.add(1,"d"),i._nextDay=e),i))}function ue(e,t){var i,n;if(1===t.length&&w(t[0])&&(t=t[0]),!t.length)return _e();for(i=t[0],n=1;n<t.length;++n)t[n][e](i)&&(i=t[n]);return i}function de(e,t){var i;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(i=Math.min(e.date(),S(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e)}function he(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function fe(e,t,i){return"Month"===t?de(e,i):e._d["set"+(e._isUTC?"UTC":"")+t](i)}function pe(e,t){return function(i){return null!=i?(fe(this,e,i),_e.updateOffset(this,t),this):he(this,e)}}function me(e){return 400*e/146097}function ge(e){return 146097*e/400}function ye(e){_e.duration.fn[e]=function(){return this._data[e]}}function ve(e){"undefined"==typeof ender&&(we=Ce.moment,e?Ce.moment=s("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",_e):Ce.moment=_e)}for(var _e,we,be,Te="2.8.4",Ce="undefined"!=typeof global?global:this,ke=Math.round,Me=Object.prototype.hasOwnProperty,$e=0,Se=1,De=2,Ie=3,Pe=4,Le=5,Oe=6,xe={},ze=[],Ye="undefined"!=typeof module&&module&&module.exports,Ee=/^\/?Date\((\-?\d+)/i,Ve=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ae=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Fe=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,We=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,He=/\d\d?/,Ue=/\d{1,3}/,Be=/\d{1,4}/,Re=/[+\-]?\d{1,6}/,Ne=/\d+/,Ge=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,je=/Z|[\+\-]\d\d:?\d\d/gi,qe=/T/i,Ze=/[\+\-]?\d+/,Xe=/[\+\-]?\d+(\.\d{1,3})?/,Qe=/\d/,Je=/\d\d/,Ke=/\d{3}/,et=/\d{4}/,tt=/[+-]?\d{6}/,it=/[+-]?\d+/,nt=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ot="YYYY-MM-DDTHH:mm:ssZ",st=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],rt=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],at=/([\+\-]|\d\d)/gi,lt=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),ct={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},ut={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},dt={},ht={s:45,m:45,h:22,d:26,M:11},ft="DDD w W M D d".split(" "),pt="M D H h m s w W".split(" "),mt={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return m(this.year()%100,2)},YYYY:function(){return m(this.year(),4)},YYYYY:function(){return m(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+m(Math.abs(e),6)},gg:function(){return m(this.weekYear()%100,2)},gggg:function(){return m(this.weekYear(),4)},ggggg:function(){return m(this.weekYear(),5)},GG:function(){return m(this.isoWeekYear()%100,2)},GGGG:function(){return m(this.isoWeekYear(),4)},GGGGG:function(){return m(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return $(this.milliseconds()/100)},SS:function(){return m($(this.milliseconds()/10),2)},SSS:function(){return m(this.milliseconds(),3)},SSSS:function(){return m(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+m($(e/60),2)+":"+m($(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+m($(e/60),2)+m($(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},gt={},yt=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];ft.length;)be=ft.pop(),mt[be+"o"]=l(mt[be],be);for(;pt.length;)be=pt.pop(),mt[be+be]=a(mt[be],2);mt.DDDD=a(mt.DDD,3),h(c.prototype,{set:function(e){var t,i;for(i in e)t=e[i],"function"==typeof t?this[i]=t:this["_"+i]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,i){var n,o,s;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(o=_e.utc([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(s="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[n]=new RegExp(s.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(i&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!i&&this._monthsParse[n].test(e))return n}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(i=_e([2e3,1]).day(t),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[t]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,i){var n=this._calendar[e];return"function"==typeof n?n.apply(t,[i]):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,i,n){var o=this._relativeTime[i];return"function"==typeof o?o(e,t,i,n):o.replace(/%d/i,e)},pastFuture:function(e,t){var i=this._relativeTime[e>0?"future":"past"];return"function"==typeof i?i(t):i.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return ae(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),_e=function(t,i,o,s){var r;return"boolean"==typeof o&&(s=o,o=e),r={},r._isAMomentObject=!0,r._i=t,r._f=i,r._l=o,r._strict=s,r._isUTC=!1,r._pf=n(),ce(r)},_e.suppressDeprecationWarnings=!1,_e.createFromInputFallback=s("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),_e.min=function(){var e=[].slice.call(arguments,0);return ue("isBefore",e)},_e.max=function(){var e=[].slice.call(arguments,0);return ue("isAfter",e)},_e.utc=function(t,i,o,s){var r;return"boolean"==typeof o&&(s=o,o=e),r={},r._isAMomentObject=!0,r._useUTC=!0,r._isUTC=!0,r._l=o,r._i=t,r._f=i,r._strict=s,r._pf=n(),ce(r).utc()},_e.unix=function(e){return _e(1e3*e)},_e.duration=function(e,t){var n,o,s,r,a=e,l=null;return _e.isDuration(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(a={},t?a[t]=e:a.milliseconds=e):(l=Ve.exec(e))?(n="-"===l[1]?-1:1,a={y:0,d:$(l[De])*n,h:$(l[Ie])*n,m:$(l[Pe])*n,s:$(l[Le])*n,ms:$(l[Oe])*n}):(l=Ae.exec(e))?(n="-"===l[1]?-1:1,s=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*n},a={y:s(l[2]),M:s(l[3]),d:s(l[4]),h:s(l[5]),m:s(l[6]),s:s(l[7]),w:s(l[8])}):"object"==typeof a&&("from"in a||"to"in a)&&(r=y(_e(a.from),_e(a.to)),a={},a.ms=r.milliseconds,a.M=r.months),o=new d(a),_e.isDuration(e)&&i(e,"_locale")&&(o._locale=e._locale),o},_e.version=Te,_e.defaultFormat=ot,_e.ISO_8601=function(){},_e.momentProperties=ze,_e.updateOffset=function(){},_e.relativeTimeThreshold=function(t,i){return ht[t]===e?!1:i===e?ht[t]:(ht[t]=i,!0)},_e.lang=s("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return _e.locale(e,t)}),_e.locale=function(e,t){var i;return e&&(i="undefined"!=typeof t?_e.defineLocale(e,t):_e.localeData(e),i&&(_e.duration._locale=_e._locale=i)),_e._locale._abbr},_e.defineLocale=function(e,t){return null!==t?(t.abbr=e,xe[e]||(xe[e]=new c),xe[e].set(t),_e.locale(e),xe[e]):(delete xe[e],null)},_e.langData=s("moment.langData is deprecated. Use moment.localeData instead.",function(e){return _e.localeData(e)}),_e.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return _e._locale;if(!w(e)){if(t=Y(e))return t;e=[e]}return z(e)},_e.isMoment=function(e){return e instanceof u||null!=e&&i(e,"_isAMomentObject")},_e.isDuration=function(e){return e instanceof d};for(be=yt.length-1;be>=0;--be)M(yt[be]);_e.normalizeUnits=function(e){return C(e)},_e.invalid=function(e){var t=_e.utc(NaN);return null!=e?h(t._pf,e):t._pf.userInvalidated=!0,t},_e.parseZone=function(){return _e.apply(null,arguments).parseZone()},_e.parseTwoDigitYear=function(e){return $(e)+($(e)>68?1900:2e3)},h(_e.fn=u.prototype,{clone:function(){return _e(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=_e(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():F(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):F(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return O(this)},isDSTShifted:function(){return this._a?this.isValid()&&T(this._a,(this._isUTC?_e.utc(this._a):_e(this._a)).toArray())>0:!1},parsingFlags:function(){return h({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._dateTzOffset(),"m")),this},format:function(e){var t=F(this,e||_e.defaultFormat);return this.localeData().postformat(t)},add:v(1,"add"),subtract:v(-1,"subtract"),diff:function(e,t,i){var n,o,s,r=E(e,this),a=6e4*(this.zone()-r.zone());return t=C(t),"year"===t||"month"===t?(n=432e5*(this.daysInMonth()+r.daysInMonth()),o=12*(this.year()-r.year())+(this.month()-r.month()),s=this-_e(this).startOf("month")-(r-_e(r).startOf("month")),s-=6e4*(this.zone()-_e(this).startOf("month").zone()-(r.zone()-_e(r).startOf("month").zone())),o+=s/n,"year"===t&&(o/=12)):(n=this-r,o="second"===t?n/1e3:"minute"===t?n/6e4:"hour"===t?n/36e5:"day"===t?(n-a)/864e5:"week"===t?(n-a)/6048e5:n),i?o:p(o)},from:function(e,t){return _e.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(_e(),e)},calendar:function(e){var t=e||_e(),i=E(t,this).startOf("day"),n=this.diff(i,"days",!0),o=-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse";return this.format(this.localeData().calendar(o,this,_e(t)))},isLeapYear:function(){return P(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=oe(e,this.localeData()),this.add(e-t,"d")):t},month:pe("Month",!0),startOf:function(e){switch(e=C(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=C(t),t===e||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},isAfter:function(e,t){var i;return t=C("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=_e.isMoment(e)?e:_e(e),+this>+e):(i=_e.isMoment(e)?+e:+_e(e),i<+this.clone().startOf(t));
},isBefore:function(e,t){var i;return t=C("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=_e.isMoment(e)?e:_e(e),+e>+this):(i=_e.isMoment(e)?+e:+_e(e),+this.clone().endOf(t)<i)},isSame:function(e,t){var i;return t=C(t||"millisecond"),"millisecond"===t?(e=_e.isMoment(e)?e:_e(e),+this===+e):(i=+_e(e),+this.clone().startOf(t)<=i&&i<=+this.clone().endOf(t))},min:s("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=_e.apply(null,arguments),this>e?this:e}),max:s("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=_e.apply(null,arguments),e>this?this:e}),zone:function(e,t){var i,n=this._offset||0;return null==e?this._isUTC?n:this._dateTzOffset():("string"==typeof e&&(e=U(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(i=this._dateTzOffset()),this._offset=e,this._isUTC=!0,null!=i&&this.subtract(i,"m"),n!==e&&(!t||this._changeInProgress?_(this,_e.duration(n-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,_e.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?_e(e).zone():0,(this.zone()-e)%60===0},daysInMonth:function(){return S(this.year(),this.month())},dayOfYear:function(e){var t=ke((_e(this).startOf("day")-_e(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=ae(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=ae(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=ae(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return D(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return D(this.year(),e.dow,e.doy)},get:function(e){return e=C(e),this[e]()},set:function(e,t){return e=C(e),"function"==typeof this[e]&&this[e](t),this},locale:function(t){var i;return t===e?this._locale._abbr:(i=_e.localeData(t),null!=i&&(this._locale=i),this)},lang:s("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),_e.fn.millisecond=_e.fn.milliseconds=pe("Milliseconds",!1),_e.fn.second=_e.fn.seconds=pe("Seconds",!1),_e.fn.minute=_e.fn.minutes=pe("Minutes",!1),_e.fn.hour=_e.fn.hours=pe("Hours",!0),_e.fn.date=pe("Date",!0),_e.fn.dates=s("dates accessor is deprecated. Use date instead.",pe("Date",!0)),_e.fn.year=pe("FullYear",!0),_e.fn.years=s("years accessor is deprecated. Use year instead.",pe("FullYear",!0)),_e.fn.days=_e.fn.day,_e.fn.months=_e.fn.month,_e.fn.weeks=_e.fn.week,_e.fn.isoWeeks=_e.fn.isoWeek,_e.fn.quarters=_e.fn.quarter,_e.fn.toJSON=_e.fn.toISOString,h(_e.duration.fn=d.prototype,{_bubble:function(){var e,t,i,n=this._milliseconds,o=this._days,s=this._months,r=this._data,a=0;r.milliseconds=n%1e3,e=p(n/1e3),r.seconds=e%60,t=p(e/60),r.minutes=t%60,i=p(t/60),r.hours=i%24,o+=p(i/24),a=p(me(o)),o-=p(ge(a)),s+=p(o/30),o%=30,a+=p(s/12),s%=12,r.days=o,r.months=s,r.years=a},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return p(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*$(this._months/12)},humanize:function(e){var t=re(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var i=_e.duration(e,t);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(e,t){var i=_e.duration(e,t);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(e){return e=C(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,i;if(e=C(e),"month"===e||"year"===e)return t=this._days+this._milliseconds/864e5,i=this._months+12*me(t),"month"===e?i:i/12;switch(t=this._days+Math.round(ge(this._months/12)),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 24*t*60+this._milliseconds/6e4;case"second":return 24*t*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*t*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:_e.fn.lang,locale:_e.fn.locale,toIsoString:s("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),o=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(i?i+"D":"")+(n||o||s?"T":"")+(n?n+"H":"")+(o?o+"M":"")+(s?s+"S":""):"P0D"},localeData:function(){return this._locale}}),_e.duration.fn.toString=_e.duration.fn.toISOString;for(be in lt)i(lt,be)&&ye(be.toLowerCase());_e.duration.fn.asMilliseconds=function(){return this.as("ms")},_e.duration.fn.asSeconds=function(){return this.as("s")},_e.duration.fn.asMinutes=function(){return this.as("m")},_e.duration.fn.asHours=function(){return this.as("h")},_e.duration.fn.asDays=function(){return this.as("d")},_e.duration.fn.asWeeks=function(){return this.as("weeks")},_e.duration.fn.asMonths=function(){return this.as("M")},_e.duration.fn.asYears=function(){return this.as("y")},_e.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,i=1===$(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}}),Ye?module.exports=_e:"function"==typeof define&&define.amd?(define("moment",["require","exports","module"],function(e,t,i){return i.config&&i.config()&&i.config().noGlobal===!0&&(Ce.moment=we),_e}),ve(!0)):ve()}.call(this),define("modules/counter",["jquery"],function(e){"use strict";var t=function(t){var i=null,n=null,o={initialize:function(t){var n=this;i=e(t),i.find(".counter").each(function(t){var i=e(this);setTimeout(function(){n.startCounter(i)},200*t)})},startCounter:function(e){var t=this,i=Number(String(e.data("counter")).replace(/\,/g,"")),n={couterUpdate:5,i:0,counterNumber:0},o=0;for(e.css({opacity:"0"}),i<n.couterUpdate?n.couterUpdate=i-1:n.couterUpdate=n.couterUpdate,n.couterUpdate<1&&(n.couterUpdate=1),n.i=0;n.i<n.couterUpdate;n.i++)t.updateNumber(e,n,i,o,n.i),o+=1;e=null},updateNumber:function(e,t,i,o){var s=this,r=t.couterUpdate,a=t.counterNumber;n=setTimeout(function(){return a=6>i?o+1:Math.round(Math.abs(parseInt(i)/o-i)),a===1/0||_.isNaN(a)?void(a=0):r-1===o||0===i?(e.text(i),TweenLite.to(e,0,{y:"10%"}),TweenLite.to(e,.5,{opacity:1,y:"0%",overwrite:"all",onComplete:s.killTween,onCompleteParams:[e]}),s.destroy(),void(e=null)):(e.text(a),TweenLite.to(e,0,{y:"10%"}),void TweenLite.to(e,.2,{opacity:1,ease:Circ.easeOut,y:"0%",onComplete:function(){TweenLite.to(e,.2,{delay:.3,ease:Circ.easeIn,opacity:"0",y:"-10%"})}}))},750*o)},killTween:function(e){TweenLite.killTweensOf(e)},destroy:function(){i=null}};return o.initialize(t),{destroy:o.destroy}};return t}),define("apps/common/views/locationItemView",["apps/master/masterApp","apps/common/views/pictureFillItemView","moment","moment-timezone","modules/carousel","onScreen","modules/counter"],function(e,t,i,n,o,s,r){"use strict";return t.extend({carouselOptions:{location:{navigation:!0,center:!0,itemsCustom:[[0,1],[450,1],[550,1],[1600,1]]}},carousel:null,firstTime:!0,contactPage:!1,hasNotAnimated:!1,setClockTimer:null,subOfficeSelected:null,localOfficeTime:null,clockTimer:null,$filterContainer:null,ui:{$locationFilter:"#location-filter a",$subLocationFilter:"#filter-container .sub-location-filter a"},events:{"click @ui.$locationFilter":"handleFilterClick","click @ui.$subLocationFilter":"handleSubFilterClick"},initialize:function(e){var t=this;t.useOptions=t.carouselOptions[e.type],t.$filterContainer=$("#filter-container")},onShow:function(){var e=this;e.removeLazyLoadBackground(),e.checkForContactPage(),e.scrollToSection(),$("html").hasClass("no-touch")&&e.startCarousel(),e.attachOnScreen()},removeLazyLoadBackground:function(){$(".lazy-load-bg-img").each(function(){$(this).removeClass("lazy-load-bg-img")}),$(".lazy-load-bg-transition").each(function(){$(this).removeClass("lazy-load-bg-transition")})},checkForContactPage:function(){var e=this;e.contactPage=e.$el.hasClass("contact-page")},scrollToSection:function(){var e=this,t=location.hash.replace(/#/,"").split("-");_.defer(function(){if(t[0]===e.el.id){var i=8*(.1*e.$el.index()).toFixed(2)*100,n=$("html,body");e.switchOffices(t[0],t[1],""),e.switchFilter($("#sub-filter-"+t[0]),$("#filter-"+t[1])),n.animate({scrollTop:e.$el.offset().top},i,"linear")}})},attachOnScreen:function(){var t=this;t.$el.onScreen({container:window,direction:"vertical",doIn:function(){return t.addOnScreenClass(),t.hasNotAnimated&&t.contactPage?void t.handleTimezone():(t.contactPage&&(t.handleTimezone(),t.setCarouselHeight(),e.vent.on("window:resized",function(){t.setCarouselHeight(t)})),void(t.hasNotAnimated=!0))},doOut:function(){t.removeOnScreenClass(),t.killTimmer()},tolerance:0,throttle:50,toggleClass:"onScreen",lazyAttr:null,lazyPlaceholder:"",debug:!1})},addOnScreenClass:function(){this.$el.addClass("on-screen")},removeOnScreenClass:function(){this.$el.removeClass("on-screen")},startCounter:function(){var e=this;e.counter=new r(e.$el)},setCarouselHeight:function(){var e,t=this;e=t.$el.find(".location-container").height(),t.$el.find(".owl-item").css({height:e+"px"}),setTimeout(function(){var i=t.$el.find(".location-container").height();i!==e&&t.$el.find(".owl-item").css({height:i+"px"})},500)},handleTimezone:function(){var e=this,t=e.$el.find(".container__location-clock"),i=t.find(".time"),n=i.data("timezone");e.localOfficeTime=moment().tz(n),window.clearTimeout(e.setClockTimer),t.each(function(t){var i=$(this),n=i.find(".time").data("timezone"),o=moment().tz(n),s=o&&o.format("h:mm a");i.find(".time").css({border:"1px solid rgba(0, 0, 0, 0)"}).html(" "+s),t>=1||e.setClock(o)})},setClock:function(e){var t=this,i=t.$el.find(".clock-hand-hour"),n=t.$el.find(".clock-hand-minute"),o=t.$el.find(".clock-hand-seconds"),s=6*e.seconds(),r=6*e.minutes()+s/60,a=e.hours()%12/12*360+90+r/12,l=.1,c="Cubic.easeInOut";t.firstTime&&(l=2,t.firstTime=!1,TweenLite.to(n,0,{rotation:r-360}),TweenLite.to(i,0,{rotation:a-360}),TweenLite.to(o,l,{opacity:1,ease:c})),TweenLite.to(n,l,{rotation:r+"_cw",opacity:1,ease:c,onComplete:t.killTween,onCompleteParams:[n]}),TweenLite.to(i,l,{rotation:a+"_cw",opacity:1,ease:c,onComplete:t.killTween,onCompleteParams:[i]}),t.updateClock()},killTimmer:function(){var e=this;clearTimeout(e.setClockTimer)},updateClock:function(){var e=this;e.setClockTimer=setTimeout(function(){e.handleTimezone()},3e4)},killTween:function(e){TweenLite.killTweensOf(e)},startCarousel:function(){var e=this;e.useOptions.selector=e.$el.find(".carousel"),e.carousel=new o(e.useOptions)},handleFilterClick:function(e){e.preventDefault();var t=this,i=$(e.target),n=i.data("office"),o=t.$el.find(".active a").data("office");n!==o&&(i.parent().hasClass("parent-offices-filter")?(t.hideAllSubFilters(),t.showSelectedSubOfficesFilter(n,o),t.showFirsSubOffice(n),t.subOfficeSelected=!0):t.hideAllSubFilters(),t.switchOffices(null,n,o),t.toggleMainFilter(i),n=null,o=null)},toggleMainFilter:function(e){var t=this;t.ui.$locationFilter.closest(".location-filter").find("span").removeClass("filter--is-active active").each(function(){e.closest("span").addClass("filter--is-active active")})},handleSubFilterClick:function(e){e.preventDefault();var t=this,i=$(e.target),n=i.closest(".sub-location-filter"),o=n.data("sub-filter"),s=i.data("office"),r=i.closest(".sub-location-filter-is-active").find(".filter--is-active a").data("office");t.switchFilter(n,i),t.switchOffices(o,s,r)},switchFilter:function(e,t){e.find("span").removeClass("filter--is-active"),t.parent().addClass("filter--is-active")},showFirsSubOffice:function(e){$("#"+e).children().first().addClass("active")},switchOffices:function(e,t,i){null===e?($(".container__location").not("#"+i).removeClass("previous"),$("#"+i).removeClass("active").addClass("previous"),$("#"+t).addClass("active")):($("#"+e+"-"+t).addClass("active"),$("#"+e).find(".previous").removeClass("previous"),$("#"+e+"-"+i).removeClass("active").addClass("previous"))},hideAllSubFilters:function(){var e=this;e.ui.$subLocationFilter.closest(".sub-location-filter").removeClass("sub-location-filter-is-active")},showSelectedSubOfficesFilter:function(e){var t=this;t.ui.$subLocationFilter.closest('[data-sub-filter="'+e+'"]').addClass("sub-location-filter-is-active")},onDestroy:function(){var t=this;t.$el.onScreen("remove"),t.stopListening(e.vent,"window:breakpoint:changed"),t.localOfficeTime=null,t.useOptions.selector=null,t.carousel=null,clearTimeout(t.clockTimer),t.remove()}})}),define("apps/common/views/leadershipItemView",["apps/master/masterApp","apps/common/views/pictureFillItemView"],function(e,t){"use strict";return t.extend({ui:{$locationContainer:"#location-filter-container",$location:"#location-list-wrapper .location",$leaderListItem:"#leader-list span",$officeMenu:"#office-menu",$list:".list",$leadershipMenu:"#leadership-menu"},events:{"click @ui.$officeMenu":"toggleListMenu","click @ui.$leadershipMenu":"toggleListMenu","click @ui.$leaderListItem":"handleBioClick","click @ui.$location":"handleLocationClick"},onShow:function(){var e=this;e.$locationListContainer=$("#location-list-container"),e.$leadershipContainer=$("#leadership-container"),e.$leaderList=$("#leader-list"),e.$leaderListContainer=e.$leaderList.closest(".list-container"),e.$bios=$("#bios"),e.$currentOffice=$("#current-office"),e.$currentName=$("#current-name"),e.$leadershipFilterWrapper=$("#leadership-filter-wrapper"),e.currentOffice="global",e.isAnimating=!1,e.chuckClick=!0,e.scrollToAnimationTime=500,e.ie9=$("html").hasClass("ie9")?!0:!1,e.$el.find('[data-fullname="Chuck Porter"] span').click(),e.chuckClick=!1,e.$lists=e.$leaderListContainer.add("#location-list-container"),e.listItemHeight=e.$leaderList.find("li").eq(0).outerHeight(),Modernizr.touch||(e.throttledScroll=_.throttle(e.leaderScrollHandler,100),e.$leaderList.on("scroll",_.bind(e.throttledScroll,e)))},toggleListMenu:function(e){e.preventDefault(),$(e.target).closest(".list-wrapper").toggleClass("show-list"),this.manageListDisplay()},manageListDisplay:function(){var t,i;Modernizr.touch||(t=this,i=e.windowManager.getBreakPoint(),("l"===i||"xl"===i)&&(t.$lists.removeClass("list-container--is-short"),t.$lists.each(function(){var e=$(this),i=e.find("li:not(.list--is-hidden)"),n=i.size();n*t.listItemHeight<=470&&e.addClass("list-container--is-short")})))},leaderScrollHandler:function(){var e,t=this,i=t.$leaderList[0],n=i.scrollHeight;e=i.scrollTop+t.$leaderList.outerHeight(),e>=n-20?t.$leaderListContainer.addClass("list-container--is-scrolled-bottom"):t.$leaderListContainer.removeClass("list-container--is-scrolled-bottom")},closeListMenu:function(e){e.closest(".list-wrapper").removeClass("show-list")},openListMenu:function(e){e.closest(".list-wrapper").addClass("show-list")},updateSelected:function(e,t){var i=e.closest(".list-wrapper").find(".selected");i.fadeOut(function(){i.html(t).fadeIn()})},handleLocationClick:function(e){var t=this,i=$(e.target),n=i.attr("data-location"),o=i.attr("data-filter");"global"===n?t.resetLeaderList():(t.ui.$leaderListItem.closest("li").removeClass("list--is-hidden"),t.ui.$leaderListItem.closest("li").not("."+n).addClass("list--is-hidden")),t.updateListActive(i),t.openListMenu(t.$leaderList),t.updateSelected(i,o),t.manageListDisplay()},scrollToObject:function(e){var t=this,i=e.offset(),n=Math.round(i.top);t.chuckClick||$("html, body").animate({scrollTop:n},t.scrollToAnimationTime)},handleBioClick:function(e){e.preventDefault();var t=this,i=$(e.target),n=i.data("id")||i.parent().data("id");t.updateBio(n),t.updateLeaderList(n),t.updateListActive(i),t.updateSelected(i,i.text()),t.scrollToObject(t.$leadershipFilterWrapper),setTimeout(function(){t.closeListMenu(i),t.closeListMenu(t.$locationListContainer)},t.scrollToAnimationTime)},updateLeaderList:function(e){var t=this;t.$leaderList.find(".active").removeClass("active"),$("#list-item-"+e).addClass("active")},updateBio:function(e){var t=this,i=$("#"+e);t.$bios.find(".bio--is-active").removeClass("bio--is-active"),i.addClass("bio--is-active")},resetLeaderList:function(){var e=this;e.$leaderList.find(".list--is-hidden").removeClass("list--is-hidden")},updateListActive:function(e){e.closest(".list-container").find(".list--is-active").removeClass("list--is-active"),e.addClass("list--is-active")},onDestroy:function(){var e=this;e.$leadershipContainer=null,e.$leaderList=null,e.$bios=null,e.$locationListContainer=null,e.$leaderListContainer=null,e.$currentOffice=null,e.$currentName=null,e.$leadershipFilterWrapper=null}})}),define("apps/common/views/refreshItemView",["apps/master/masterApp","apps/common/views/genericItemView","refresh"],function(e,t){"use strict";return t.extend({children:[],isClosing:!1,videoId:null,$videoPlayer:void 0,$videoHolder:null,$videoCloseButton:null,$tile:null,$tileCloseButton:null,closeButtonHtml:'<div class="button--close"/>',events:{"click .button-container":"closeVideoEvent","click .video":"openPlayer"},ui:{$videos:".video"},initialize:function(){_.bindAll(this,"closePlayer","openPlayer")},onShow:function(){var t=this,i=e.config.templates.refresh,n={App:e,currentBreakpoint:e.windowManager.getBreakPoint(),templates:{button:i.button,container:i.container},responsive:{xs:{containers:2},s:{containers:2},m:{containers:1},l:{containers:2},xl:{containers:3}}};t.listenTo(e.vent,"window:breakpoint:changed",function(e){t.refresh.update.call(t.refresh,e)}),t.listenTo(e.vent,"video:videoPlayer:close",function(){t.closePlayer()}),t.$el.hasClass("news")?n.buttonPosition="right":t.$el.hasClass("news-employee")?n.buttonPosition="right":t.$el.hasClass("instagram")?(n.buttonPosition="right",n.responsive={xs:{containers:3},s:{containers:4},m:{containers:2},l:{containers:4},xl:{containers:6}}):t.$el.hasClass("related-work")||t.$el.hasClass("related-careers")?n.responsive={xs:{containers:3},s:{containers:3},m:{containers:1},l:{containers:2},xl:{containers:3}}:t.$el.hasClass("tweets")&&(n.buttonPosition="right"),t.$refresh=t.$el.refresh(n),t.refresh=t.$refresh.data("plugin_refresh"),t.$refresh.on("refresh:animation:complete",function(e,i){var n;t.$tile=$(i),n=t.$tile.find(".button-container"),n.length&&(n.remove(),t.setTileCloseButton(),t.$tile.prepend(t.$tileCloseButton),t.$tileCloseButton.removeClass("transparent"),t.$tile=null,n=null)})},openPlayer:function(t){var i,n,o=this,s="videoPlayer";t.preventDefault(),o.$tile=$(t.currentTarget),o.videoId=o.$tile.data("video"),o.videoId&&(_.isUndefined(o.$videoPlayer)?(o.$videoPlayer=o.$videoPlayer||$('<div data-videoid="'+o.videoId+'" class="home-video-player"><div class="cs-video__shell"><span class="play-button icon-circle"></span></div><div class="fitvid"><div class="video-holder"></div></div></div>'),o.$videoCloseButton=$(o.closeButtonHtml),o.setTileCloseButton(),o.$videoHolder=o.$videoHolder||o.$videoPlayer.find(".fitvid"),0===o.$videoHolder.find(".video-holder").length&&o.$videoHolder.append('<div class="video-holder"/>'),o.$el.prepend(o.$videoPlayer),i=e.getItemViews(s),n=new i({el:o.$videoPlayer,type:s,autoPlay:!0,attach:!0}),n.triggerMethod("before:render",n),o.children.push(n),n.bindUIElements(),n.triggerMethod("render",n),o.$videoPlayer.click(),n.once("video:playing",function(){o.$videoPlayer.prepend(o.$videoCloseButton),o.$tile.prepend(o.$tileCloseButton),o.$videoCloseButton.removeClass("transparent"),o.$tileCloseButton.removeClass("transparent"),o.positionPlayer(),o.$tile=null})):(n=o.children[0],n.loadNewVideoById(o.videoId),o.setTileCloseButton(),n.once("video:buffering",function(){o.$tile.prepend(o.$tileCloseButton),o.$tileCloseButton.removeClass("transparent")})),n.on("video:playing",function(){setTimeout(function(){e.vent.trigger("backgroundVideo:pause")},500)}))},closeVideoEvent:function(){e.vent.trigger("refresh:video:close")},closePlayer:function(){var t=this;t.isClosing||(e.vent.trigger("backgroundVideo:play"),t.isClosing=!0,_.isNull(t.$videoCloseButton)||(t.$videoCloseButton.addClass("transparent"),t.$tileCloseButton.addClass("transparent"),_.isUndefined(t.$videoPlayer)||(t.$videoPlayer.addClass("home-video-player--is-closed"),setTimeout(function(){t.teardown(),t.children[0].destroy(),t.children[0].off("video:playing"),t.children.shift(),t.isClosing=!1},400))))},setTileCloseButton:function(){var e=this,t='<div class="button-container transparent">'+e.closeButtonHtml+"</div>";e.$tileCloseButton&&e.$tileCloseButton.length&&e.$tileCloseButton.remove(),e.$tileCloseButton=null,e.$tileCloseButton=$(t)},positionPlayer:function(){var t=this;e.pageManager.scrollPage(t.$videoPlayer.offset().top,600)},teardown:function(){var e=this;e.$videoCloseButton&&e.$videoCloseButton.remove(),e.$tileCloseButton&&e.$tileCloseButton.remove(),e.$videoCloseButton=null,e.$tileCloseButton=null,e.$tile=null,e.$videoHolder=null,e.$videoPlayer=void 0},onDestroy:function(){var t=this;t.stopListening(e.vent,"window:breakpoint:changed"),t.$refresh.off("refresh:animation:complete"),t.refresh.destroy(),t.children[0]&&t.children[0].off("video:playing"),t.children=null,t.$refresh=null,t.refresh=null,t.teardown()}})}),define("apps/common/views/networkItemView",["apps/master/masterApp","apps/common/views/pictureFillItemView"],function(e,t){"use strict";return t.extend({onShow:function(){},onDestroy:function(){}})}),function(e){"use strict";function t(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")}function i(e,t){var i=n(e,t)?s:o;i(e,t)}var n,o,s;"classList"in document.documentElement?(n=function(e,t){return e.classList.contains(t)},o=function(e,t){e.classList.add(t)},s=function(e,t){e.classList.remove(t)}):(n=function(e,i){return t(i).test(e.className)},o=function(e,t){n(e,t)||(e.className=e.className+" "+t)},s=function(e,i){e.className=e.className.replace(t(i)," ")});var r={hasClass:n,addClass:o,removeClass:s,toggleClass:i,has:n,add:o,remove:s,toggle:i};"function"==typeof define&&define.amd?define("classie/classie",r):"object"==typeof exports?module.exports=r:e.classie=r}(window),function(e){"use strict";function t(e){if(e){if("string"==typeof n[e])return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var t,o=0,s=i.length;s>o;o++)if(t=i[o]+e,"string"==typeof n[t])return t}}var i="Webkit Moz ms Ms O".split(" "),n=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return t}):"object"==typeof exports?module.exports=t:e.getStyleProperty=t}(window),function(e,t){"use strict";function i(e){var t=parseFloat(e),i=-1===e.indexOf("%")&&!isNaN(t);return i&&t}function n(){}function o(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0,i=a.length;i>t;t++){var n=a[t];e[n]=0}return e}function s(t){function n(){if(!h){h=!0;var n=e.getComputedStyle;if(c=function(){var e=n?function(e){return n(e,null)}:function(e){return e.currentStyle};return function(t){var i=e(t);return i||r("Style returned "+i+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),i}}(),u=t("boxSizing")){var o=document.createElement("div");o.style.width="200px",o.style.padding="1px 2px 3px 4px",o.style.borderStyle="solid",o.style.borderWidth="1px 2px 3px 4px",o.style[u]="border-box";var s=document.body||document.documentElement;s.appendChild(o);var a=c(o);d=200===i(a.width),s.removeChild(o)}}}function s(e){if(n(),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var t=c(e);if("none"===t.display)return o();var s={};s.width=e.offsetWidth,s.height=e.offsetHeight;for(var r=s.isBorderBox=!(!u||!t[u]||"border-box"!==t[u]),h=0,f=a.length;f>h;h++){var p=a[h],m=t[p];m=l(e,m);var g=parseFloat(m);s[p]=isNaN(g)?0:g}var y=s.paddingLeft+s.paddingRight,v=s.paddingTop+s.paddingBottom,_=s.marginLeft+s.marginRight,w=s.marginTop+s.marginBottom,b=s.borderLeftWidth+s.borderRightWidth,T=s.borderTopWidth+s.borderBottomWidth,C=r&&d,k=i(t.width);k!==!1&&(s.width=k+(C?0:y+b));var M=i(t.height);return M!==!1&&(s.height=M+(C?0:v+T)),s.innerWidth=s.width-(y+b),s.innerHeight=s.height-(v+T),s.outerWidth=s.width+_,s.outerHeight=s.height+w,s}}function l(t,i){if(e.getComputedStyle||-1===i.indexOf("%"))return i;var n=t.style,o=n.left,s=t.runtimeStyle,r=s&&s.left;return r&&(s.left=t.currentStyle.left),n.left=i,i=n.pixelLeft,n.left=o,r&&(s.left=r),i}var c,u,d,h=!1;return s}var r="undefined"==typeof console?n:function(e){0},a=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],s):"object"==typeof exports?module.exports=s(require("desandro-get-style-property")):e.getSize=s(e.getStyleProperty)}(window),function(e){"use strict";function t(e){"function"==typeof e&&(t.isReady?e():r.push(e))}function i(e){var i="readystatechange"===e.type&&"complete"!==s.readyState;t.isReady||i||n()}function n(){t.isReady=!0;for(var e=0,i=r.length;i>e;e++){var n=r[e];n()}}function o(o){return"complete"===s.readyState?n():(o.bind(s,"DOMContentLoaded",i),o.bind(s,"readystatechange",i),o.bind(e,"load",i)),t}var s=e.document,r=[];t.isReady=!1,"function"==typeof define&&define.amd?define("doc-ready/doc-ready",["eventie/eventie"],o):"object"==typeof exports?module.exports=o(require("eventie")):e.docReady=o(e.eventie)}(window),function(e){"use strict";function t(e,t){return e[r](t)}function i(e){if(!e.parentNode){var t=document.createDocumentFragment();t.appendChild(e)}}function n(e,t){i(e);for(var n=e.parentNode.querySelectorAll(t),o=0,s=n.length;s>o;o++)if(n[o]===e)return!0;return!1}function o(e,n){return i(e),t(e,n)}var s,r=function(){if(e.matches)return"matches";if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],i=0,n=t.length;n>i;i++){var o=t[i],s=o+"MatchesSelector";if(e[s])return s}}();if(r){var a=document.createElement("div"),l=t(a,"div");s=l?t:o}else s=n;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return s}):"object"==typeof exports?module.exports=s:window.matchesSelector=s}(Element.prototype),function(e,t){"use strict";"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property","fizzy-ui-utils/utils"],function(i,n,o,s){return t(e,i,n,o,s)}):"object"==typeof exports?module.exports=t(e,require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property"),require("fizzy-ui-utils")):(e.Outlayer={},e.Outlayer.Item=t(e,e.EventEmitter,e.getSize,e.getStyleProperty,e.fizzyUIUtils))}(window,function(e,t,i,n,o){"use strict";function s(e){for(var t in e)return!1;return t=null,!0}function r(e,t){e&&(this.element=e,this.layout=t,this.position={x:0,y:0},this._create())}function a(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}var l=e.getComputedStyle,c=l?function(e){return l(e,null)}:function(e){return e.currentStyle},u=n("transition"),d=n("transform"),h=u&&d,f=!!n("perspective"),p={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[u],m=["transform","transition","transitionDuration","transitionProperty"],g=function(){for(var e={},t=0,i=m.length;i>t;t++){var o=m[t],s=n(o);s&&s!==o&&(e[o]=s)}return e}();o.extend(r.prototype,t.prototype),r.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},r.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.prototype.getSize=function(){this.size=i(this.element)},r.prototype.css=function(e){var t=this.element.style;for(var i in e){var n=g[i]||i;t[n]=e[i]}},r.prototype.getPosition=function(){var e=c(this.element),t=this.layout.options,i=t.isOriginLeft,n=t.isOriginTop,o=e[i?"left":"right"],s=e[n?"top":"bottom"],r=this.layout.size,a=-1!=o.indexOf("%")?parseFloat(o)/100*r.width:parseInt(o,10),l=-1!=s.indexOf("%")?parseFloat(s)/100*r.height:parseInt(s,10);a=isNaN(a)?0:a,l=isNaN(l)?0:l,a-=i?r.paddingLeft:r.paddingRight,l-=n?r.paddingTop:r.paddingBottom,this.position.x=a,this.position.y=l},r.prototype.layoutPosition=function(){var e=this.layout.size,t=this.layout.options,i={},n=t.isOriginLeft?"paddingLeft":"paddingRight",o=t.isOriginLeft?"left":"right",s=t.isOriginLeft?"right":"left",r=this.position.x+e[n];i[o]=this.getXValue(r),i[s]="";var a=t.isOriginTop?"paddingTop":"paddingBottom",l=t.isOriginTop?"top":"bottom",c=t.isOriginTop?"bottom":"top",u=this.position.y+e[a];i[l]=this.getYValue(u),i[c]="",this.css(i),this.emitEvent("layout",[this])},r.prototype.getXValue=function(e){var t=this.layout.options;return t.percentPosition&&!t.isHorizontal?e/this.layout.size.width*100+"%":e+"px"},r.prototype.getYValue=function(e){var t=this.layout.options;return t.percentPosition&&t.isHorizontal?e/this.layout.size.height*100+"%":e+"px"},r.prototype._transitionTo=function(e,t){this.getPosition();var i=this.position.x,n=this.position.y,o=parseInt(e,10),s=parseInt(t,10),r=o===this.position.x&&s===this.position.y;if(this.setPosition(e,t),r&&!this.isTransitioning)return void this.layoutPosition();var a=e-i,l=t-n,c={};c.transform=this.getTranslate(a,l),this.transition({to:c,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},r.prototype.getTranslate=function(e,t){var i=this.layout.options;return e=i.isOriginLeft?e:-e,t=i.isOriginTop?t:-t,f?"translate3d("+e+"px, "+t+"px, 0)":"translate("+e+"px, "+t+"px)"},r.prototype.goTo=function(e,t){this.setPosition(e,t),this.layoutPosition()},r.prototype.moveTo=h?r.prototype._transitionTo:r.prototype.goTo,r.prototype.setPosition=function(e,t){this.position.x=parseInt(e,10),this.position.y=parseInt(t,10)},r.prototype._nonTransition=function(e){this.css(e.to),e.isCleaning&&this._removeStyles(e.to);for(var t in e.onTransitionEnd)e.onTransitionEnd[t].call(this)},r.prototype._transition=function(e){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(e);var t=this._transn;for(var i in e.onTransitionEnd)t.onEnd[i]=e.onTransitionEnd[i];for(i in e.to)t.ingProperties[i]=!0,e.isCleaning&&(t.clean[i]=!0);if(e.from){this.css(e.from);var n=this.element.offsetHeight;n=null}this.enableTransition(e.to),this.css(e.to),this.isTransitioning=!0};var y="opacity,"+a(g.transform||"transform");r.prototype.enableTransition=function(){
this.isTransitioning||(this.css({transitionProperty:y,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(p,this,!1))},r.prototype.transition=r.prototype[u?"_transition":"_nonTransition"],r.prototype.onwebkitTransitionEnd=function(e){this.ontransitionend(e)},r.prototype.onotransitionend=function(e){this.ontransitionend(e)};var v={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};r.prototype.ontransitionend=function(e){if(e.target===this.element){var t=this._transn,i=v[e.propertyName]||e.propertyName;if(delete t.ingProperties[i],s(t.ingProperties)&&this.disableTransition(),i in t.clean&&(this.element.style[e.propertyName]="",delete t.clean[i]),i in t.onEnd){var n=t.onEnd[i];n.call(this),delete t.onEnd[i]}this.emitEvent("transitionEnd",[this])}},r.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(p,this,!1),this.isTransitioning=!1},r.prototype._removeStyles=function(e){var t={};for(var i in e)t[i]="";this.css(t)};var _={transitionProperty:"",transitionDuration:""};return r.prototype.removeTransitionStyles=function(){this.css(_)},r.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},r.prototype.remove=function(){if(!u||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var e=this;this.once("transitionEnd",function(){e.removeElem()}),this.hide()},r.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var e=this.layout.options,t={},i=this.getHideRevealTransitionEndProperty("visibleStyle");t[i]=this.onRevealTransitionEnd,this.transition({from:e.hiddenStyle,to:e.visibleStyle,isCleaning:!0,onTransitionEnd:t})},r.prototype.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},r.prototype.getHideRevealTransitionEndProperty=function(e){var t=this.layout.options[e];if(t.opacity)return"opacity";for(var i in t)return i},r.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var e=this.layout.options,t={},i=this.getHideRevealTransitionEndProperty("hiddenStyle");t[i]=this.onHideTransitionEnd,this.transition({from:e.visibleStyle,to:e.hiddenStyle,isCleaning:!0,onTransitionEnd:t})},r.prototype.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},r.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},r}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","eventEmitter/EventEmitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(i,n,o,s,r){return t(e,i,n,o,s,r)}):"object"==typeof exports?module.exports=t(e,require("eventie"),require("wolfy87-eventemitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):e.Outlayer=t(e,e.eventie,e.EventEmitter,e.getSize,e.fizzyUIUtils,e.Outlayer.Item)}(window,function(e,t,i,n,o,s){"use strict";function r(e,t){var i=o.getQueryElement(e);if(!i)return void(a&&a.error("Bad element for "+this.constructor.namespace+": "+(i||e)));this.element=i,l&&(this.$element=l(this.element)),this.options=o.extend({},this.constructor.defaults),this.option(t);var n=++u;this.element.outlayerGUID=n,d[n]=this,this._create(),this.options.isInitLayout&&this.layout()}var a=e.console,l=e.jQuery,c=function(){},u=0,d={};return r.namespace="outlayer",r.Item=s,r.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},o.extend(r.prototype,i.prototype),r.prototype.option=function(e){o.extend(this.options,e)},r.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),o.extend(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},r.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},r.prototype._itemize=function(e){for(var t=this._filterFindItemElements(e),i=this.constructor.Item,n=[],o=0,s=t.length;s>o;o++){var r=t[o],a=new i(r,this);n.push(a)}return n},r.prototype._filterFindItemElements=function(e){return o.filterFindElements(e,this.options.itemSelector)},r.prototype.getItemElements=function(){for(var e=[],t=0,i=this.items.length;i>t;t++)e.push(this.items[t].element);return e},r.prototype.layout=function(){this._resetLayout(),this._manageStamps();var e=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},r.prototype._init=r.prototype.layout,r.prototype._resetLayout=function(){this.getSize()},r.prototype.getSize=function(){this.size=n(this.element)},r.prototype._getMeasurement=function(e,t){var i,s=this.options[e];s?("string"==typeof s?i=this.element.querySelector(s):o.isElement(s)&&(i=s),this[e]=i?n(i)[t]:s):this[e]=0},r.prototype.layoutItems=function(e,t){e=this._getItemsForLayout(e),this._layoutItems(e,t),this._postLayout()},r.prototype._getItemsForLayout=function(e){for(var t=[],i=0,n=e.length;n>i;i++){var o=e[i];o.isIgnored||t.push(o)}return t},r.prototype._layoutItems=function(e,t){if(this._emitCompleteOnItems("layout",e),e&&e.length){for(var i=[],n=0,o=e.length;o>n;n++){var s=e[n],r=this._getItemLayoutPosition(s);r.item=s,r.isInstant=t||s.isLayoutInstant,i.push(r)}this._processLayoutQueue(i)}},r.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},r.prototype._processLayoutQueue=function(e){for(var t=0,i=e.length;i>t;t++){var n=e[t];this._positionItem(n.item,n.x,n.y,n.isInstant)}},r.prototype._positionItem=function(e,t,i,n){n?e.goTo(t,i):e.moveTo(t,i)},r.prototype._postLayout=function(){this.resizeContainer()},r.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},r.prototype._getContainerSize=c,r.prototype._setContainerMeasure=function(e,t){if(void 0!==e){var i=this.size;i.isBorderBox&&(e+=t?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),e=Math.max(e,0),this.element.style[t?"width":"height"]=e+"px"}},r.prototype._emitCompleteOnItems=function(e,t){function i(){o.dispatchEvent(e+"Complete",null,[t])}function n(){r++,r===s&&i()}var o=this,s=t.length;if(!t||!s)return void i();for(var r=0,a=0,l=t.length;l>a;a++){var c=t[a];c.once(e,n)}},r.prototype.dispatchEvent=function(e,t,i){var n=t?[t].concat(i):i;if(this.emitEvent(e,n),l)if(this.$element=this.$element||l(this.element),t){var o=l.Event(t);o.type=e,this.$element.trigger(o,i)}else this.$element.trigger(e,i)},r.prototype.ignore=function(e){var t=this.getItem(e);t&&(t.isIgnored=!0)},r.prototype.unignore=function(e){var t=this.getItem(e);t&&delete t.isIgnored},r.prototype.stamp=function(e){if(e=this._find(e)){this.stamps=this.stamps.concat(e);for(var t=0,i=e.length;i>t;t++){var n=e[t];this.ignore(n)}}},r.prototype.unstamp=function(e){if(e=this._find(e))for(var t=0,i=e.length;i>t;t++){var n=e[t];o.removeFrom(this.stamps,n),this.unignore(n)}},r.prototype._find=function(e){return e?("string"==typeof e&&(e=this.element.querySelectorAll(e)),e=o.makeArray(e)):void 0},r.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var e=0,t=this.stamps.length;t>e;e++){var i=this.stamps[e];this._manageStamp(i)}}},r.prototype._getBoundingRect=function(){var e=this.element.getBoundingClientRect(),t=this.size;this._boundingRect={left:e.left+t.paddingLeft+t.borderLeftWidth,top:e.top+t.paddingTop+t.borderTopWidth,right:e.right-(t.paddingRight+t.borderRightWidth),bottom:e.bottom-(t.paddingBottom+t.borderBottomWidth)}},r.prototype._manageStamp=c,r.prototype._getElementOffset=function(e){var t=e.getBoundingClientRect(),i=this._boundingRect,o=n(e),s={left:t.left-i.left-o.marginLeft,top:t.top-i.top-o.marginTop,right:i.right-t.right-o.marginRight,bottom:i.bottom-t.bottom-o.marginBottom};return s},r.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.prototype.bindResize=function(){this.isResizeBound||(t.bind(e,"resize",this),this.isResizeBound=!0)},r.prototype.unbindResize=function(){this.isResizeBound&&t.unbind(e,"resize",this),this.isResizeBound=!1},r.prototype.onresize=function(){function e(){t.resize(),delete t.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var t=this;this.resizeTimeout=setTimeout(e,100)},r.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},r.prototype.needsResizeLayout=function(){var e=n(this.element),t=this.size&&e;return t&&e.innerWidth!==this.size.innerWidth},r.prototype.addItems=function(e){var t=this._itemize(e);return t.length&&(this.items=this.items.concat(t)),t},r.prototype.appended=function(e){var t=this.addItems(e);t.length&&(this.layoutItems(t,!0),this.reveal(t))},r.prototype.prepended=function(e){var t=this._itemize(e);if(t.length){var i=this.items.slice(0);this.items=t.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(t,!0),this.reveal(t),this.layoutItems(i)}},r.prototype.reveal=function(e){this._emitCompleteOnItems("reveal",e);for(var t=e&&e.length,i=0;t&&t>i;i++){var n=e[i];n.reveal()}},r.prototype.hide=function(e){this._emitCompleteOnItems("hide",e);for(var t=e&&e.length,i=0;t&&t>i;i++){var n=e[i];n.hide()}},r.prototype.revealItemElements=function(e){var t=this.getItems(e);this.reveal(t)},r.prototype.hideItemElements=function(e){var t=this.getItems(e);this.hide(t)},r.prototype.getItem=function(e){for(var t=0,i=this.items.length;i>t;t++){var n=this.items[t];if(n.element===e)return n}},r.prototype.getItems=function(e){e=o.makeArray(e);for(var t=[],i=0,n=e.length;n>i;i++){var s=e[i],r=this.getItem(s);r&&t.push(r)}return t},r.prototype.remove=function(e){var t=this.getItems(e);if(this._emitCompleteOnItems("remove",t),t&&t.length)for(var i=0,n=t.length;n>i;i++){var s=t[i];s.remove(),o.removeFrom(this.items,s)}},r.prototype.destroy=function(){var e=this.element.style;e.height="",e.position="",e.width="";for(var t=0,i=this.items.length;i>t;t++){var n=this.items[t];n.destroy()}this.unbindResize();var o=this.element.outlayerGUID;delete d[o],delete this.element.outlayerGUID,l&&l.removeData(this.element,this.constructor.namespace)},r.data=function(e){e=o.getQueryElement(e);var t=e&&e.outlayerGUID;return t&&d[t]},r.create=function(e,t){function i(){r.apply(this,arguments)}return Object.create?i.prototype=Object.create(r.prototype):o.extend(i.prototype,r.prototype),i.prototype.constructor=i,i.defaults=o.extend({},r.defaults),o.extend(i.defaults,t),i.prototype.settings={},i.namespace=e,i.data=r.data,i.Item=function(){s.apply(this,arguments)},i.Item.prototype=new s,o.htmlInit(i,e),l&&l.bridget&&l.bridget(e,i),i},r.Item=s,r}),function(e){"use strict";function t(){function e(t){for(var i in e.defaults)this[i]=e.defaults[i];for(i in t)this[i]=t[i]}return i.Rect=e,e.defaults={x:0,y:0,width:0,height:0},e.prototype.contains=function(e){var t=e.width||0,i=e.height||0;return this.x<=e.x&&this.y<=e.y&&this.x+this.width>=e.x+t&&this.y+this.height>=e.y+i},e.prototype.overlaps=function(e){var t=this.x+this.width,i=this.y+this.height,n=e.x+e.width,o=e.y+e.height;return this.x<n&&t>e.x&&this.y<o&&i>e.y},e.prototype.getMaximalFreeRects=function(t){if(!this.overlaps(t))return!1;var i,n=[],o=this.x+this.width,s=this.y+this.height,r=t.x+t.width,a=t.y+t.height;return this.y<t.y&&(i=new e({x:this.x,y:this.y,width:this.width,height:t.y-this.y}),n.push(i)),o>r&&(i=new e({x:r,y:this.y,width:o-r,height:this.height}),n.push(i)),s>a&&(i=new e({x:this.x,y:a,width:this.width,height:s-a}),n.push(i)),this.x<t.x&&(i=new e({x:this.x,y:this.y,width:t.x-this.x,height:this.height}),n.push(i)),n},e.prototype.canFit=function(e){return this.width>=e.width&&this.height>=e.height},e}var i=e.Packery=function(){};"function"==typeof define&&define.amd?define("rect",t):(e.Packery=e.Packery||{},e.Packery.Rect=t())}(window),function(e){"use strict";function t(e){function t(e,t,i){this.width=e||0,this.height=t||0,this.sortDirection=i||"downwardLeftToRight",this.reset()}t.prototype.reset=function(){this.spaces=[],this.newSpaces=[];var t=new e({x:0,y:0,width:this.width,height:this.height});this.spaces.push(t),this.sorter=i[this.sortDirection]||i.downwardLeftToRight},t.prototype.pack=function(e){for(var t=0,i=this.spaces.length;i>t;t++){var n=this.spaces[t];if(n.canFit(e)){this.placeInSpace(e,n);break}}},t.prototype.placeInSpace=function(e,t){e.x=t.x,e.y=t.y,this.placed(e)},t.prototype.placed=function(e){for(var i=[],n=0,o=this.spaces.length;o>n;n++){var s=this.spaces[n],r=s.getMaximalFreeRects(e);r?i.push.apply(i,r):i.push(s)}this.spaces=i,t.mergeRects(this.spaces),this.spaces.sort(this.sorter)},t.mergeRects=function(e){for(var t=0,i=e.length;i>t;t++){var n=e[t];if(n){var o=e.slice(0);o.splice(t,1);for(var s=0,r=0,a=o.length;a>r;r++){var l=o[r],c=t>r?0:1;n.contains(l)&&(e.splice(r+c-s,1),s++)}}}return e};var i={downwardLeftToRight:function(e,t){return e.y-t.y||e.x-t.x},rightwardTopToBottom:function(e,t){return e.x-t.x||e.y-t.y}};return t}if("function"==typeof define&&define.amd)define("packer",["./rect"],t);else{var i=e.Packery=e.Packery||{};i.Packer=t(i.Rect)}}(window),function(e){"use strict";function t(e,t,i){var n=e("transform"),o=function(){t.Item.apply(this,arguments)};o.prototype=new t.Item;var s=o.prototype._create;return o.prototype._create=function(){s.call(this),this.rect=new i,this.placeRect=new i},o.prototype.dragStart=function(){this.getPosition(),this.removeTransitionStyles(),this.isTransitioning&&n&&(this.element.style[n]="none"),this.getSize(),this.isPlacing=!0,this.needsPositioning=!1,this.positionPlaceRect(this.position.x,this.position.y),this.isTransitioning=!1,this.didDrag=!1},o.prototype.dragMove=function(e,t){this.didDrag=!0;var i=this.layout.size;e-=i.paddingLeft,t-=i.paddingTop,this.positionPlaceRect(e,t)},o.prototype.dragStop=function(){this.getPosition();var e=this.position.x!==this.placeRect.x,t=this.position.y!==this.placeRect.y;this.needsPositioning=e||t,this.didDrag=!1},o.prototype.positionPlaceRect=function(e,t,i){this.placeRect.x=this.getPlaceRectCoord(e,!0),this.placeRect.y=this.getPlaceRectCoord(t,!1,i)},o.prototype.getPlaceRectCoord=function(e,t,i){var n=t?"Width":"Height",o=this.size["outer"+n],s=this.layout[t?"columnWidth":"rowHeight"],r=this.layout.size["inner"+n];t||(r=Math.max(r,this.layout.maxY),this.layout.rowHeight||(r-=this.layout.gutter));var a;if(s){s+=this.layout.gutter,r+=t?this.layout.gutter:0,e=Math.round(e/s);var l;l=this.layout.options.isHorizontal?t?"ceil":"floor":t?"floor":"ceil";var c=Math[l](r/s);c-=Math.ceil(o/s),a=c}else a=r-o;return e=i?e:Math.min(e,a),e*=s||1,Math.max(0,e)},o.prototype.copyPlaceRectPosition=function(){this.rect.x=this.placeRect.x,this.rect.y=this.placeRect.y},o}"function"==typeof define&&define.amd?define("item",["get-style-property/get-style-property","outlayer/outlayer","./rect"],t):e.Packery.Item=t(e.getStyleProperty,e.Outlayer,e.Packery.Rect)}(window),function(e){"use strict";function t(e,t,i,n,o,s){function r(e,t){return e.position.y-t.position.y||e.position.x-t.position.x}function a(e,t){return e.position.x-t.position.x||e.position.y-t.position.y}var l=i.create("packery");return l.Item=s,l.prototype._create=function(){i.prototype._create.call(this),this.packer=new o,this.stamp(this.options.stamped);var e=this;this.handleDraggabilly={dragStart:function(t){e.itemDragStart(t.element)},dragMove:function(t){e.itemDragMove(t.element,t.position.x,t.position.y)},dragEnd:function(t){e.itemDragEnd(t.element)}},this.handleUIDraggable={start:function(t){e.itemDragStart(t.currentTarget)},drag:function(t,i){e.itemDragMove(t.currentTarget,i.position.left,i.position.top)},stop:function(t){e.itemDragEnd(t.currentTarget)}}},l.prototype._resetLayout=function(){this.getSize(),this._getMeasurements();var e=this.packer;this.options.isHorizontal?(e.width=Number.POSITIVE_INFINITY,e.height=this.size.innerHeight+this.gutter,e.sortDirection="rightwardTopToBottom"):(e.width=this.size.innerWidth+this.gutter,e.height=Number.POSITIVE_INFINITY,e.sortDirection="downwardLeftToRight"),e.reset(),this.maxY=0,this.maxX=0},l.prototype._getMeasurements=function(){this._getMeasurement("columnWidth","width"),this._getMeasurement("rowHeight","height"),this._getMeasurement("gutter","width")},l.prototype._getItemLayoutPosition=function(e){return this._packItem(e),e.rect},l.prototype._packItem=function(e){this._setRectSize(e.element,e.rect),this.packer.pack(e.rect),this._setMaxXY(e.rect)},l.prototype._setMaxXY=function(e){this.maxX=Math.max(e.x+e.width,this.maxX),this.maxY=Math.max(e.y+e.height,this.maxY)},l.prototype._setRectSize=function(e,i){var n=t(e),o=n.outerWidth,s=n.outerHeight;if(o||s){var r=this.columnWidth+this.gutter,a=this.rowHeight+this.gutter;o=this.columnWidth?Math.ceil(o/r)*r:o+this.gutter,s=this.rowHeight?Math.ceil(s/a)*a:s+this.gutter}i.width=Math.min(o,this.packer.width),i.height=Math.min(s,this.packer.height)},l.prototype._getContainerSize=function(){return this.options.isHorizontal?{width:this.maxX-this.gutter}:{height:this.maxY-this.gutter}},l.prototype._manageStamp=function(e){var t,i=this.getItem(e);if(i&&i.isPlacing)t=i.placeRect;else{var o=this._getElementOffset(e);t=new n({x:this.options.isOriginLeft?o.left:o.right,y:this.options.isOriginTop?o.top:o.bottom})}this._setRectSize(e,t),this.packer.placed(t),this._setMaxXY(t)},l.prototype.sortItemsByPosition=function(){var e=this.options.isHorizontal?a:r;this.items.sort(e)},l.prototype.fit=function(e,t,i){var n=this.getItem(e);n&&(this._getMeasurements(),this.stamp(n.element),n.getSize(),n.isPlacing=!0,t=void 0===t?n.rect.x:t,i=void 0===i?n.rect.y:i,n.positionPlaceRect(t,i,!0),this._bindFitEvents(n),n.moveTo(n.placeRect.x,n.placeRect.y),this.layout(),this.unstamp(n.element),this.sortItemsByPosition(),n.isPlacing=!1,n.copyPlaceRectPosition())},l.prototype._bindFitEvents=function(e){function t(){n++,2===n&&i.emitEvent("fitComplete",[i,e])}var i=this,n=0;e.on("layout",function(){return t(),!0}),this.on("layoutComplete",function(){return t(),!0})},l.prototype.resize=function(){var e=t(this.element),i=this.size&&e,n=this.options.isHorizontal?"innerHeight":"innerWidth";i&&e[n]===this.size[n]||this.layout()},l.prototype.itemDragStart=function(e){this.stamp(e);var t=this.getItem(e);t&&t.dragStart()},l.prototype.itemDragMove=function(e,t,i){function n(){s.layout(),delete s.dragTimeout}var o=this.getItem(e);o&&o.dragMove(t,i);var s=this;this.clearDragTimeout(),this.dragTimeout=setTimeout(n,40)},l.prototype.clearDragTimeout=function(){this.dragTimeout&&clearTimeout(this.dragTimeout)},l.prototype.itemDragEnd=function(t){var i,n=this.getItem(t);if(n&&(i=n.didDrag,n.dragStop()),!n||!i&&!n.needsPositioning)return void this.unstamp(t);e.add(n.element,"is-positioning-post-drag");var o=this._getDragEndLayoutComplete(t,n);n.needsPositioning?(n.on("layout",o),n.moveTo(n.placeRect.x,n.placeRect.y)):n&&n.copyPlaceRectPosition(),this.clearDragTimeout(),this.on("layoutComplete",o),this.layout()},l.prototype._getDragEndLayoutComplete=function(t,i){var n=i&&i.needsPositioning,o=0,s=n?2:1,r=this;return function(){return o++,o!==s?!0:(i&&(e.remove(i.element,"is-positioning-post-drag"),i.isPlacing=!1,i.copyPlaceRectPosition()),r.unstamp(t),r.sortItemsByPosition(),n&&r.emitEvent("dragItemPositioned",[r,i]),!0)}},l.prototype.bindDraggabillyEvents=function(e){e.on("dragStart",this.handleDraggabilly.dragStart),e.on("dragMove",this.handleDraggabilly.dragMove),e.on("dragEnd",this.handleDraggabilly.dragEnd)},l.prototype.bindUIDraggableEvents=function(e){e.on("dragstart",this.handleUIDraggable.start).on("drag",this.handleUIDraggable.drag).on("dragstop",this.handleUIDraggable.stop)},l.Rect=n,l.Packer=o,l}"function"==typeof define&&define.amd?define("Packery",["classie/classie","get-size/get-size","outlayer/outlayer","./rect","./packer","./item"],t):e.Packery=t(e.classie,e.getSize,e.Outlayer,e.Packery.Rect,e.Packery.Packer,e.Packery.Item)}(window),define("apps/news/views/newsItemView",["apps/master/masterApp","Packery","apps/common/views/genericItemView"],function(e,t,i){"use strict";return i.extend({pckryIsActive:!1,pckry:null,onShow:function(){var t=this;t.mediaSize=e.windowManager.getBreakPoint(),_.indexOf(["xs","s"],t.mediaSize)<0&&t.initializePackery()},initializePackery:function(){var e=this;e.pckry=new t(e.el,{transitionDuration:0,itemSelector:".item"}),e.pckry.layout(),e.pckryIsActive=!0},onDestroy:function(){var e=this;_.isUndefined(e.pckry)&&e.pckry.destroy()}})}),define("apps/common/views/videoItemView",["apps/master/masterApp","apps/common/views/pictureFillItemView","YTPlayer"],function(e,t){"use strict";return t.extend({videoOptions:{background:{fitToBackground:!0,fallbackPoster:"source/public/videos/CPB_VideoBG.jpg",videoId:"",playerVars:{html5:1,vq:"hd720"}}},_options:{},_backgroundVideoCanPlay:!0,initialize:function(e){this.options=e},onShow:function(){var t=this,i=t.videoOptions[t.options.type.split("-")[1]];i.videoId=t.$el.data("video-id"),t._options=$.extend({},t.options,i),t._backgroundVideo="video-background"===t.$el.data("type")?!0:!1,t._options.el||(t._options.el=t.$el),Modernizr.touch||(t.initializeVideoBackground(),t.listenTo(e.vent,"backgroundVideo:play",t.enableVideo),t.listenTo(e.vent,"backgroundVideo:pause",t.disableVideo))},enableVideo:function(){var e=this;e._backgroundVideoCanPlay=!0,e.play()},disableVideo:function(){var e=this;e._backgroundVideoCanPlay=!1,e.pause()},initializeVideoBackground:function(){var t=this,i=t._options.el.YTPlayer(t._options);i.promise().done(function(){t.listenTo(e.vent,"window:scrolled",t.scrollEvents),t.videoEvents()})},videoEvents:function(){var e=this,t=e._options.el.data("ytPlayer"),i=_.once(e.triggerAnimationEvent);t.onPlayerStateChange=function(e){e.data===YT.PlayerState.PLAYING&&i()}},triggerAnimationEvent:function(){e.vent.trigger("home:hero:video:play")},scrollEvents:function(e){var t=this,i=t._options.el.data("ytPlayer");if(!_.isUndefined(i)){var n=t._options.el.data("ytPlayer").getPlayer();null!==n&&("undefined"==typeof n||_.isNull(n)||(e.start&&_.isFunction(n.pauseVideo)?n.pauseVideo():e.stop&&_.isFunction(n.playVideo)&&t._backgroundVideoCanPlay&&n.playVideo()))}},isVideoSupported:function(){return Modernizr.video},remove:function(){this._options.el.remove()},play:function(){this._options.el.data("ytPlayer").getPlayer().playVideo()},pause:function(){this._options.el.data("ytPlayer").getPlayer().pauseVideo()},onDestroy:function(){var t=this;t.$el.data("ytPlayer")&&t.$el.data("ytPlayer").destroy(),t.stopListening(e.vent,"window:scrolled",t.scrollEvents),t.stopListening(e.vent,"backgroundVideo:play"),t.stopListening(e.vent,"backgroundVideo:pause")}})}),define("apps/work/views/filterItemView",["apps/master/masterApp","apps/common/views/genericItemView"],function(e,t){"use strict";return t.extend({ui:{$filterToggle:"#filter-static-list",$filterOptionsList:"#filter-fluid-list",$filterOptionsA:"#filter-fluid-list .filter",$filterOptionsLi:"#filter-fluid-list .filter-list-item",$viewAll:"#filter-viewall",$sortBy:"#filter-sortby"},events:{"click @ui.$filterOptionsLi":"handleFilterClick","click @ui.$viewAll":"toggleTiles","click @ui.$sortBy":"toggleCategories"},isHidingFilter:!1,onShow:function(){var e=this;e.bindUIElements(),e.bindEvents()},bindEvents:function(){var t=this;t.listenTo(e.vent,"header:scrolled",t.toggleHeader)},toggleHeader:function(e){var t=this;e.showHeader?t.$el.removeClass("is-scrolled"):t.$el.addClass("is-scrolled")},toggleCategories:function(e){e.preventDefault(),this.ui.$filterOptionsList.toggleClass("visible")},handleFilterClick:function(e){var t=this,i=$(e.currentTarget).children(),n=i.attr("href").split("#")[1];e.preventDefault(),t.toggleTiles(n),t.$el.find(".filter").removeClass("selected"),i.addClass("selected")},toggleTiles:function(t){var i,n=this;"string"==typeof t?i=".item.category-"+t:("object"==typeof t&&_.isFunction(t.preventDefault)&&t.preventDefault(),i="View-All",n.$el.find(".filter").removeClass("selected"),n.ui.$viewAll.addClass("selected")),e.vent.trigger("work:tile:filter",i)},onDestroy:function(){var t=this;t.stopListening(e.vent,"header:scrolled",t.scrollEvents)}})}),define("modules/homepageIntroAnimation",["apps/master/masterApp","jquery"],function(e){"use strict";var t=function(t){var i=null,n=null,o=null,s=null,r=null,a=null,l={initialize:function(e){var t=this;t.homepageIntroAnimation(e)},homepageIntroAnimation:function(t){var i=this,n=t.find("#parallelogram--magenta, #parallelogram--white, #parallelogram--yellow"),o=t.find("#water-mark"),s=t.find("#text-container"),r=t.find("#three-sided-border"),a=$("#refresh-work"),l=a.find(".refresh--is-active .item"),c=l.length,u=e.windowManager.getBreakPoint();return i.introAnimation=!0,Modernizr.touch?(l.css({opacity:"1"}),void a.addClass("show-refresh")):("m"===u&&l.css({opacity:"0"}),n.addClass("wiped"),o.addClass("wiped"),setTimeout(function(){s.addClass("wiped")},1200),TweenLite.to(r,.5,{opacity:1,y:0,delay:3}),setTimeout(function(){a.addClass("show-refresh")},1e3),void setTimeout(function(){l.each(function(e){TweenLite.to($(this),.35,{opacity:1,y:"0",ease:"Back.easeInOut",delay:.2*e,onComplete:function(){c===e+1&&(TweenLite.killTweensOf(l),a.removeClass("animation-setup"))}})})},1500))},destroy:function(){i=null,n=null,o=null,s=null,r=null,a=null}};return l.initialize(t),{destroy:l.destroy}};return t}),define("apps/common/views/heroItemView",["apps/master/masterApp","apps/common/views/pictureFillItemView","modules/counter","modules/homepageIntroAnimation"],function(e,t,i,n){"use strict";return t.extend({onShow:function(){var e=this;e.introAnimation=!1,e.detectCSSMaskSupport(),e.triggerHomepageAnimation(),e.attachOnScreen()},detectCSSMaskSupport:function(){void 0!==document.body.style.mask?(Modernizr.cssmasks=!0,$("html").addClass("cssmask")):(Modernizr.cssmasks=!1,$("html").addClass("no-cssmask"))},triggerHomepageAnimation:function(){var t=this,i=0;i=Modernizr.touch?1e3:2e3,t.$el.hasClass("index-hero")&&(t.listenTo(e.vent,"home:hero:video:play",t.triggerIntroAnimation),setTimeout(function(){t.introAnimation||t.triggerIntroAnimation()},i))},triggerIntroAnimation:function(){var e=this;e.homepageIntroAnimation=new n(e.$el)},attachOnScreen:function(){var e=this;e.$el.onScreen({container:window,direction:"vertical",doIn:function(){e.hasNotAnimated||(e.startCounter(),e.hasNotAnimated=!0)},doOut:function(){},tolerance:0,throttle:50,toggleClass:"onScreen",lazyAttr:null,lazyPlaceholder:"",debug:!1})},startCounter:function(){var e=this;e.counter=new i(e.$el)},onDestroy:function(){var e=this;e.counter&&e.counter.destroy(e.$el),delete e.counter}})}),define("apps/common/views/hooplaItemView",["apps/master/masterApp","apps/common/views/genericItemView"],function(e,t){"use strict";return t.extend({hooplaAnimated:!1,$percent:null,$infographicWrapper:null,fillColor:null,onShow:function(){var t=this;t.$percent=$("#percent"),t.$infographicWrapper=$("#infographic--wrapper"),t.listenToOnce(t,"onScreen",t._handleOnScreen),setTimeout(function(){e.windowManager.$window.scroll()},1e3)},_handleOnScreen:function(){var e=this;e.getPercentage()},getPercentage:function(){var e=this,t=e.$percent.data("percentage");e.hooplaAnimated||(49>=t?e.fillColor="white":t>=50&&75>=t?e.fillColor="yellow":t>75?e.fillColor="magenta":e.fillColor="white",e.animateCircle(t,e.$infographicWrapper,e.fillColor),e.animatePercentage(t))},animatePercentage:function(e){var t=this,i={number:0};t.tween=TweenLite.to(i,1.7,{number:"+="+e,roundProps:"score",onUpdate:t.updateHandler,onUpdateParams:[t,i,e]})},updateHandler:function(e,t,i){e.$percent?e.$percent.html(Math.round(t.number)+"%"):$("#percent").html(i+"%")},animateCircle:function(e,t,i){var n=this,o=1200-1200*(.01*e),s=$("#hoopla--circle"),r="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend";s.attr("class","hoopla--circle "+i).css({"stroke-dashoffset":o}).one(r,function(){n.hooplaAnimated=!0,n.$percent=null,s.css({"stroke-dashoffset":o}),n.addHoopla()}),n.hooplaTimeout=setTimeout(function(){n.addHoopla(e,t)},2200)},addHoopla:function(e,t){100===e&&t.addClass("hoopla-award")},killTween:function(){var e=this;TweenLite.killTweensOf(e.tween),e.hooplaTimeout&&clearTimeout(e.hooplaTimeout)},onDestroy:function(){this.killTween()}})}),define("apps/common/views/videoPlayerItemView",["apps/master/masterApp","apps/common/views/pictureFillItemView"],function(e,t){"use strict";return t.extend({player:null,playerID:null,playerVisible:!1,playerOptions:{origin:location.origin,controls:0,showinfo:0,wmode:"transparent",modestbranding:1,branding:0,rel:0,autohide:0},ui:{videoHolder:".video-holder",content:".content",closeBtn:".button--close"},events:{click:"playVideoInit","click @ui.closeBtn":"closeVideo"},constructor:function(){var i=this;t.apply(i,arguments),i.listenTo(i,"render",i.setUp),e.windowManager.$window.scroll()},_checkAndSetIDForVideo:function(){var e=this,t=e.ui.videoHolder.get(0);t.id||(t.id="fakeId"+_.uniqueId("video_")),e.playerID=t.id},setUp:function(){var t=this;t.listenTo(e.vent,"refresh:video:close",t.closeVideo),t._loadYTapi(),t._checkAndSetIDForVideo()},playVideoInit:function(){var e=this;e._loadYTapi().then(e._renderVideo)},_renderVideo:function(){var e=this;e._instantiateYTPlayer().done(function(){e._instantiateFitVid(),e.showVideoElements(),e._hideNonVideoElements()})},_instantiateFitVid:function(){var e,t,i,n=this,o=$(n.player.d);n.fitVidInstantiated||(n.fitVidInstantiated=!0,t=o.css("width"),e=o.css("height"),o.css("height")||o.css("width")||!isNaN(o.attr("height"))&&!isNaN(o.attr("width"))||(o.attr("height",9),o.attr("width",16)),e=o.is("object")||o.attr("height")&&!isNaN(parseInt(o.attr("height"),10))?parseInt(o.attr("height"),10):o.height(),t=isNaN(parseInt(o.attr("width"),10))?o.width():parseInt(o.attr("width"),10),i=e/t,o.parent().css("padding-top",100*i+"%"))},_instantiateYTPlayer:function(){var t=this,i=$.Deferred();return t.player?i.resolveWith(t):t.player=new YT.Player(t.playerID,{videoId:t.$el.data("videoid"),playerVars:t.playerOptions,events:{onReady:function(){t.listenTo(e.vent,"window:scrolled",t.scrollEvents),t.listenTo(t,"video:pause",t.restoreVideo),i.resolveWith(t)},onStateChange:_.bind(t._onPlayerStateChange,t)}}),i},_onPlayerStateChange:function(e){var t,i=this;switch(e.data){case YT.PlayerState.ENDED:t="ended",i._onVideoEnd();break;case YT.PlayerState.PLAYING:t="playing",i.trigger("video:playing",i);break;case YT.PlayerState.PAUSED:t="pause",i.trigger("video:paused",i);break;case YT.PlayerState.BUFFERING:t="buffering",i.trigger("video:buffering",i);break;case YT.PlayerState.CUED:t="cued"}if(!_.isUndefined(t)){var n="VideoEvent > "+t+" > ID:"+i.$el.data("videoid");dataLayer.push({event:n})}},_onVideoEnd:function(){var e=this;e.$el.removeClass("cs-video--showing").addClass("cs-video--notshowing")},_hideNonVideoElements:function(){var e=this;e.$el.addClass("cs-video--showing").removeClass("cs-video--notshowing"),e.ui.content&&!Modernizr.touch&&e.$el.css("paddingBottom",function(){return e.ui.content.outerHeight()})},loadNewVideoById:function(e){this.player.loadVideoById(e)},showVideoElements:function(){var e=this;_.isFunction(e.player.playVideo)&&!Modernizr.touch&&e.player.playVideo()},_showVideo:function(){},_loadYTapi:function(){var e=this,t=$.Deferred();return"undefined"==typeof YT?require(["https://www.youtube.com/iframe_api"],function(){window.onYouTubeIframeAPIReady=function(){window.onYouTubeIframeAPIReady=null,t.resolveWith(e)}}):t.resolveWith(e),t},scrollEvents:function(){var e=this;_.isNull(e.player)||e.$el.onScreen({doOut:function(){e.pauseYTvideo()}})},pauseYTvideo:function(){var e=this;_.isNull(e.player)||e.player.pauseVideo()},playYTvideo:function(){var e=this;_.isNull(e.player)||e.player.playVideo();
},closeVideo:function(t){var i=this;_.isUndefined(t)||(t.preventDefault(),t.stopPropagation()),e.vent.trigger("video:videoPlayer:close"),i.player.pauseVideo(),i._onVideoEnd()},restoreVideo:function(){var e=this;e.player.pauseVideo(),e._onVideoEnd()},onDestroy:function(){var t=this;t.stopListening(e.vent,"window:scrolled",t.scrollEvents),t.$el.onScreen("destroy"),t.player&&t.player.destroy(),t.player=null,t.playerID=null}})}),define("apps/work/views/tilesItemView",["apps/master/masterApp","apps/common/views/genericItemView"],function(e,t){"use strict";return t.extend({onShow:function(){this.bindEvents()},bindEvents:function(){var t=this;t.listenTo(e.vent,"work:tile:filter",t.filterTiles)},filterTiles:function(e){var t=this.$el.find(".item");t.addClass("out-of-filter"),t.filter(e).removeClass("out-of-filter"),"View-All"===e?t.addClass("active").removeClass("out-of-filter"):t.removeClass("active")},onDestroy:function(){var t=this;t.stopListening(e.vent,"work:tile:filter",t.scrollEvents)}})}),define("modules/helpers/compositeViewFunctions-ff320bad",["apps/master/masterApp","apps/common/views/pictureFillItemView","apps/common/views/carouselItemView","apps/common/views/locationItemView","apps/common/views/leadershipItemView","apps/common/views/refreshItemView","apps/common/views/networkItemView","apps/news/views/newsItemView","apps/common/views/videoItemView","apps/work/views/filterItemView","apps/common/views/heroItemView","apps/common/views/hooplaItemView","apps/common/views/videoPlayerItemView","apps/work/views/tilesItemView"],function(e,t,i,n,o,s,r,a,l,c,u,d,h,f){"use strict";return Marionette.CompositeView.extend({i:0,runCount:2,viewsLoaded:0,initialize:function(t){var i=this;if(e.getItemViews=i._getViewFromType,t.attach)_.forEach(i.options.htmlObject.body,function(e){i.collection.add(e)}),i.attachChildren();else{i.runCount=i.options.runCount||1,i.setUpAddChildListenTo();for(var n=0;n<i.runCount;n++)i.loadModule();i.afterModulesLoaded=_.after(i.runCount,i.modulesLoaded),i.addScrolledListenTo()}},setUpAddChildListenTo:function(){var e=this;e.listenTo(e,"add:child",function(t){e.runCount===e.viewsLoaded++?e.stopListening(e,"add:child"):e.listenToOnce(t,"images:loaded",e.afterModulesLoaded)})},modulesLoaded:function(){var t=this;t.afterModulesLoaded=$.noop,t.trigger("window:images:loaded"),e.windowManager.$window.scroll()},loadModule:function(){var e=this;e.options.collection.add(e.options.htmlObject.body[e.i]),e.i++},addScrolledListenTo:function(){var t=this;t.listenTo(e.vent,"window:scrolled:bottom",function(){t.loadModule(),t.i>=t.options.htmlObject.body.length?t.stopListening(e.vent,"window:scrolled:bottom"):t.addScrolledListenTo()})},onAddChild:function(){},onDestroy:function(){var t=this;t.stopListening(e.vent,"window:scrolled:bottom")},attachChild:function(e){var t,i=this,n=e.get("type"),o=i._getViewFromType(n);t=new o({el:e.get("html"),type:n,attach:i.options.attach}),t.triggerMethod("before:render",t),i.children.add(t),t.bindUIElements(),t.triggerMethod("render",t)},attachElContent:function(e){var t=this;return t.$el=$(e),t.el=t.$el.get(0),t},getChildView:function(e){return this._getViewFromType(e.get("type"))},childViewOptions:function(e){return{template:_.template(e.get("html")),type:e.get("type"),attach:this.options.attach}},attachChildren:function(){var e=this;e.collection.forEach(function(t,i,n){e.attachChild(n[i])})},_getViewFromType:function(e){var p;return e=String(e),p=e.match(/carousel/)?i:e.match(/refresh/)?s:e.match(/location/)?n:e.match(/leadership/)?o:e.match(/videoPlayer/)?h:e.match(/news/)?a:e.match(/video/)?l:e.match(/filter/)?c:e.match(/tiles/)?f:e.match(/contact-hero/)?r:e.match(/hero/)?u:e.match(/hoopla/)?d:t}})});
(function(){function e(e,t,n){for(var r=(n||0)-1,o=e?e.length:0;++r<o;)if(e[r]===t)return r;return-1}function t(e,t){for(var n=e.criteria,r=t.criteria,o=-1,i=n.length;++o<i;){var a=n[o],s=r[o];if(a!==s){if(a>s||"undefined"==typeof a)return 1;if(s>a||"undefined"==typeof s)return-1}}return e.index-t.index}function n(e){return"\\"+bt[e]}function r(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,o=n-t||0,i=Array(0>o?0:o);++r<o;)i[r]=e[t+r];return i}function o(e){return e instanceof o?e:new i(e)}function i(e,t){this.__chain__=!!t,this.__wrapped__=e}function a(e){function t(){if(o){var e=r(o);Mt.apply(e,arguments)}if(this instanceof t){var a=s(n.prototype),l=n.apply(a,e||arguments);return M(l)?l:a}return n.apply(i,e||arguments)}var n=e[0],o=e[2],i=e[4];return t}function s(e,t){return M(e)?Qt(e):{}}function l(e,t,n){if("function"!=typeof e)return Fe;if("undefined"==typeof t||!("prototype"in e))return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,i){return e.call(t,n,r,o,i)}}return Ie(e,t)}function u(e){function t(){var e=f?l:this;if(i){var m=r(i);Mt.apply(m,arguments)}if((a||d)&&(m||(m=r(arguments)),a&&Mt.apply(m,a),d&&m.length<c))return o|=16,u([n,h?o:-4&o,m,null,l,c]);if(m||(m=arguments),p&&(n=e[g]),this instanceof t){e=s(n.prototype);var v=n.apply(e,m);return M(v)?v:e}return n.apply(e,m)}var n=e[0],o=e[1],i=e[2],a=e[3],l=e[4],c=e[5],f=1&o,p=2&o,d=4&o,h=8&o,g=n;return t}function c(e,t){for(var n=-1,r=A(),o=e?e.length:0,i=[];++n<o;){var a=e[n];r(t,a)<0&&i.push(a)}return i}function f(e,t,n,r){for(var o=(r||0)-1,i=e?e.length:0,a=[];++o<i;){var s=e[o];if(s&&"object"==typeof s&&"number"==typeof s.length&&(Gt(s)||b(s))){t||(s=f(s,t,n));var l=-1,u=s.length,c=a.length;for(a.length+=u;++l<u;)a[c++]=s[l]}else n||a.push(s)}return a}function p(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;var i=typeof e,a=typeof t;if(!(e!==e||e&&wt[i]||t&&wt[a]))return!1;if(null==e||null==t)return e===t;var s=Et.call(e),l=Et.call(t);if(s!=l)return!1;switch(s){case dt:case ht:return+e==+t;case mt:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case At:case yt:return e==String(t)}var u=s==pt;if(!u){var c=e instanceof o,f=t instanceof o;if(c||f)return p(c?e.__wrapped__:e,f?t.__wrapped__:t,n,r);if(s!=vt)return!1;var d=e.constructor,h=t.constructor;if(d!=h&&!(P(d)&&d instanceof d&&P(h)&&h instanceof h)&&"constructor"in e&&"constructor"in t)return!1}n||(n=[]),r||(r=[]);for(var g=n.length;g--;)if(n[g]==e)return r[g]==t;var m=!0,v=0;if(n.push(e),r.push(t),u){if(v=t.length,m=v==e.length)for(;v--&&(m=p(e[v],t[v],n,r)););}else Kt(t,function(t,o,i){return Pt.call(i,o)?(v++,!(m=Pt.call(e,o)&&p(e[o],t,n,r))&&at):void 0}),m&&Kt(e,function(e,t,n){return Pt.call(n,t)?!(m=--v>-1)&&at:void 0});return n.pop(),r.pop(),m}function d(e,t){return e+$t(Ft()*(t-e+1))}function h(e,t,n){for(var r=-1,o=A(),i=e?e.length:0,a=[],s=n?[]:a;++r<i;){var l=e[r],u=n?n(l,r,e):l;(t?!r||s[s.length-1]!==u:o(s,u)<0)&&(n&&s.push(u),a.push(l))}return a}function g(e){return function(t,n,r){var o={};n=Ye(n,r,3);var i=-1,a=t?t.length:0;if("number"==typeof a)for(;++i<a;){var s=t[i];e(o,s,n(s,i,t),t)}else en(t,function(t,r,i){e(o,t,n(t,r,i),i)});return o}}function m(e,t,n,r,o,i){var s=2&t,l=16&t,c=32&t;if(!s&&!P(e))throw new TypeError;l&&!n.length&&(t&=-17,l=n=!1),c&&!r.length&&(t&=-33,c=r=!1);var f=1==t||17===t?a:u;return f([e,t,n,r,o,i])}function v(e){return Vt[e]}function A(){var t=(t=o.indexOf)===ve?e:t;return t}function y(e){return"function"==typeof e&&It.test(e)}function w(e){return Jt[e]}function b(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Et.call(e)==ft||!1}function C(e){if(!e)return e;for(var t=1,n=arguments.length;n>t;t++){var r=arguments[t];if(r)for(var o in r)e[o]=r[o]}return e}function T(e){return M(e)?Gt(e)?r(e):C({},e):e}function k(e){if(!e)return e;for(var t=1,n=arguments.length;n>t;t++){var r=arguments[t];if(r)for(var o in r)"undefined"==typeof e[o]&&(e[o]=r[o])}return e}function _(e){var t=[];return Kt(e,function(e,n){P(e)&&t.push(n)}),t.sort()}function x(e,t){return e?Pt.call(e,t):!1}function S(e){for(var t=-1,n=Zt(e),r=n.length,o={};++t<r;){var i=n[t];o[e[i]]=i}return o}function z(e){return e===!0||e===!1||e&&"object"==typeof e&&Et.call(e)==dt||!1}function j(e){return e&&"object"==typeof e&&Et.call(e)==ht||!1}function E(e){return e&&1===e.nodeType||!1}function I(e){if(!e)return!0;if(Gt(e)||L(e))return!e.length;for(var t in e)if(Pt.call(e,t))return!1;return!0}function R(e,t){return p(e,t)}function $(e){return Dt(e)&&!Lt(parseFloat(e))}function P(e){return"function"==typeof e}function M(e){return!(!e||!wt[typeof e])}function B(e){return N(e)&&e!=+e}function Q(e){return null===e}function N(e){return"number"==typeof e||e&&"object"==typeof e&&Et.call(e)==mt||!1}function D(e){return e&&wt[typeof e]&&Et.call(e)==At||!1}function L(e){return"string"==typeof e||e&&"object"==typeof e&&Et.call(e)==yt||!1}function O(e){return"undefined"==typeof e}function Y(e){var t=[];Kt(e,function(e,n){t.push(n)}),t=c(t,f(arguments,!0,!1,1));for(var n=-1,r=t.length,o={};++n<r;){var i=t[n];o[i]=e[i]}return o}function q(e){for(var t=-1,n=Zt(e),r=n.length,o=Array(r);++t<r;){var i=n[t];o[t]=[i,e[i]]}return o}function F(e){for(var t=-1,n=f(arguments,!0,!1,1),r=n.length,o={};++t<r;){var i=n[t];i in e&&(o[i]=e[i])}return o}function U(e){for(var t=-1,n=Zt(e),r=n.length,o=Array(r);++t<r;)o[t]=e[n[t]];return o}function G(e,t){var n=A(),r=e?e.length:0,o=!1;return r&&"number"==typeof r?o=n(e,t)>-1:en(e,function(e){return(o=e===t)&&at}),o}function H(e,t,n){var r=!0;t=Ye(t,n,3);var o=-1,i=e?e.length:0;if("number"==typeof i)for(;++o<i&&(r=!!t(e[o],o,e)););else en(e,function(e,n,o){return!(r=!!t(e,n,o))&&at});return r}function Z(e,t,n){var r=[];t=Ye(t,n,3);var o=-1,i=e?e.length:0;if("number"==typeof i)for(;++o<i;){var a=e[o];t(a,o,e)&&r.push(a)}else en(e,function(e,n,o){t(e,n,o)&&r.push(e)});return r}function V(e,t,n){t=Ye(t,n,3);var r=-1,o=e?e.length:0;if("number"!=typeof o){var i;return en(e,function(e,n,r){return t(e,n,r)?(i=e,at):void 0}),i}for(;++r<o;){var a=e[r];if(t(a,r,e))return a}}function J(e,t){return pe(e,t,!0)}function W(e,t,n){var r=-1,o=e?e.length:0;if(t=t&&"undefined"==typeof n?t:l(t,n,3),"number"==typeof o)for(;++r<o&&t(e[r],r,e)!==at;);else en(e,t)}function X(e,t){var n=e?e.length:0;if("number"==typeof n)for(;n--&&t(e[n],n,e)!==!1;);else{var r=Zt(e);n=r.length,en(e,function(e,o,i){return o=r?r[--n]:--n,t(i[o],o,i)===!1&&at})}}function K(e,t){var n=r(arguments,2),o=-1,i="function"==typeof t,a=e?e.length:0,s=Array("number"==typeof a?a:0);return W(e,function(e){s[++o]=(i?t:e[t]).apply(e,n)}),s}function ee(e,t,n){var r=-1,o=e?e.length:0;if(t=Ye(t,n,3),"number"==typeof o)for(var i=Array(o);++r<o;)i[r]=t(e[r],r,e);else i=[],en(e,function(e,n,o){i[++r]=t(e,n,o)});return i}function te(e,t,n){var r=-(1/0),o=r;"function"!=typeof t&&n&&n[t]===e&&(t=null);var i=-1,a=e?e.length:0;if(null==t&&"number"==typeof a)for(;++i<a;){var s=e[i];s>o&&(o=s)}else t=Ye(t,n,3),W(e,function(e,n,i){var a=t(e,n,i);a>r&&(r=a,o=e)});return o}function ne(e,t,n){var r=1/0,o=r;"function"!=typeof t&&n&&n[t]===e&&(t=null);var i=-1,a=e?e.length:0;if(null==t&&"number"==typeof a)for(;++i<a;){var s=e[i];o>s&&(o=s)}else t=Ye(t,n,3),W(e,function(e,n,i){var a=t(e,n,i);r>a&&(r=a,o=e)});return o}function re(e,t,n,r){if(!e)return n;var o=arguments.length<3;t=Ye(t,r,4);var i=-1,a=e.length;if("number"==typeof a)for(o&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);else en(e,function(e,r,i){n=o?(o=!1,e):t(n,e,r,i)});return n}function oe(e,t,n,r){var o=arguments.length<3;return t=Ye(t,r,4),X(e,function(e,r,i){n=o?(o=!1,e):t(n,e,r,i)}),n}function ie(e,t,n){return t=Ye(t,n,3),Z(e,function(e,n,r){return!t(e,n,r)})}function ae(e,t,n){if(e&&"number"!=typeof e.length&&(e=U(e)),null==t||n)return e?e[d(0,e.length-1)]:ot;var r=se(e);return r.length=qt(Yt(0,t),r.length),r}function se(e){var t=-1,n=e?e.length:0,r=Array("number"==typeof n?n:0);return W(e,function(e){var n=d(0,++t);r[t]=r[n],r[n]=e}),r}function le(e){var t=e?e.length:0;return"number"==typeof t?t:Zt(e).length}function ue(e,t,n){var r;t=Ye(t,n,3);var o=-1,i=e?e.length:0;if("number"==typeof i)for(;++o<i&&!(r=t(e[o],o,e)););else en(e,function(e,n,o){return(r=t(e,n,o))&&at});return!!r}function ce(e,n,r){var o=-1,i=e?e.length:0,a=Array("number"==typeof i?i:0);for(n=Ye(n,r,3),W(e,function(e,t,r){a[++o]={criteria:[n(e,t,r)],index:o,value:e}}),i=a.length,a.sort(t);i--;)a[i]=a[i].value;return a}function fe(e){return Gt(e)?r(e):e&&"number"==typeof e.length?ee(e):U(e)}function pe(e,t,n){return n&&I(t)?ot:(n?V:Z)(e,t)}function de(e){for(var t=-1,n=e?e.length:0,r=[];++t<n;){var o=e[t];o&&r.push(o)}return r}function he(e){return c(e,f(arguments,!0,!0,1))}function ge(e,t,n){var o=0,i=e?e.length:0;if("number"!=typeof t&&null!=t){var a=-1;for(t=Ye(t,n,3);++a<i&&t(e[a],a,e);)o++}else if(o=t,null==o||n)return e?e[0]:ot;return r(e,0,qt(Yt(0,o),i))}function me(e,t){return f(e,t)}function ve(t,n,r){if("number"==typeof r){var o=t?t.length:0;r=0>r?Yt(0,o+r):r||0}else if(r){var i=ke(t,n);return t[i]===n?i:-1}return e(t,n,r)}function Ae(e,t,n){var o=0,i=e?e.length:0;if("number"!=typeof t&&null!=t){var a=i;for(t=Ye(t,n,3);a--&&t(e[a],a,e);)o++}else o=null==t||n?1:t||o;return r(e,0,qt(Yt(0,i-o),i))}function ye(){for(var e=[],t=-1,n=arguments.length;++t<n;){var r=arguments[t];(Gt(r)||b(r))&&e.push(r)}var o=e[0],i=-1,a=A(),s=o?o.length:0,l=[];e:for(;++i<s;)if(r=o[i],a(l,r)<0){for(var t=n;--t;)if(a(e[t],r)<0)continue e;l.push(r)}return l}function we(e,t,n){var o=0,i=e?e.length:0;if("number"!=typeof t&&null!=t){var a=i;for(t=Ye(t,n,3);a--&&t(e[a],a,e);)o++}else if(o=t,null==o||n)return e?e[i-1]:ot;return r(e,Yt(0,i-o))}function be(e,t,n){var r=e?e.length:0;for("number"==typeof n&&(r=(0>n?Yt(0,r+n):qt(n,r-1))+1);r--;)if(e[r]===t)return r;return-1}function Ce(e,t,n){e=+e||0,n=+n||1,null==t&&(t=e,e=0);for(var r=-1,o=Yt(0,Rt((t-e)/n)),i=Array(o);++r<o;)i[r]=e,e+=n;return i}function Te(e,t,n){if("number"!=typeof t&&null!=t){var o=0,i=-1,a=e?e.length:0;for(t=Ye(t,n,3);++i<a&&t(e[i],i,e);)o++}else o=null==t||n?1:Yt(0,t);return r(e,o)}function ke(e,t,n,r){var o=0,i=e?e.length:o;for(n=n?Ye(n,r,1):Fe,t=n(t);i>o;){var a=o+i>>>1;n(e[a])<t?o=a+1:i=a}return o}function _e(){return h(f(arguments,!0,!0))}function xe(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n="function"!=typeof t&&r&&r[t]===e?null:t,t=!1),null!=n&&(n=Ye(n,r,3)),h(e,t,n)}function Se(e){return c(e,r(arguments,1))}function ze(){for(var e=-1,t=te(on(arguments,"length")),n=Array(0>t?0:t);++e<t;)n[e]=on(arguments,e);return n}function je(e,t){var n=-1,r=e?e.length:0,o={};for(t||!r||Gt(e[0])||(t=[]);++n<r;){var i=e[n];t?o[i]=t[n]:i&&(o[i[0]]=i[1])}return o}function Ee(e,t){if(!P(t))throw new TypeError;return function(){return--e<1?t.apply(this,arguments):void 0}}function Ie(e,t){return arguments.length>2?m(e,17,r(arguments,2),null,t):m(e,1,null,null,t)}function Re(e){for(var t=arguments.length>1?f(arguments,!0,!1,1):_(e),n=-1,r=t.length;++n<r;){var o=t[n];e[o]=m(e[o],1,null,null,e)}return e}function $e(){for(var e=arguments,t=e.length;t--;)if(!P(e[t]))throw new TypeError;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}}function Pe(e,t,n){var r,o,i,a,s,l,u,c=0,f=!1,p=!0;if(!P(e))throw new TypeError;if(t=Yt(0,t)||0,n===!0){var d=!0;p=!1}else M(n)&&(d=n.leading,f="maxWait"in n&&(Yt(t,n.maxWait)||0),p="trailing"in n?n.trailing:p);var h=function(){var n=t-(an()-a);if(0>=n){o&&clearTimeout(o);var f=u;o=l=u=ot,f&&(c=an(),i=e.apply(s,r),l||o||(r=s=null))}else l=setTimeout(h,n)},g=function(){l&&clearTimeout(l),o=l=u=ot,(p||f!==t)&&(c=an(),i=e.apply(s,r),l||o||(r=s=null))};return function(){if(r=arguments,a=an(),s=this,u=p&&(l||!d),f===!1)var n=d&&!l;else{o||d||(c=a);var m=f-(a-c),v=0>=m;v?(o&&(o=clearTimeout(o)),c=a,i=e.apply(s,r)):o||(o=setTimeout(g,m))}return v&&l?l=clearTimeout(l):l||t===f||(l=setTimeout(h,t)),n&&(v=!0,i=e.apply(s,r)),!v||l||o||(r=s=null),i}}function Me(e){if(!P(e))throw new TypeError;var t=r(arguments,1);return setTimeout(function(){e.apply(ot,t)},1)}function Be(e,t){if(!P(e))throw new TypeError;var n=r(arguments,2);return setTimeout(function(){e.apply(ot,n)},t)}function Qe(e,t){var n={};return function(){var r=t?t.apply(this,arguments):st+arguments[0];return Pt.call(n,r)?n[r]:n[r]=e.apply(this,arguments)}}function Ne(e){var t,n;if(!P(e))throw new TypeError;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}function De(e){return m(e,16,r(arguments,1))}function Le(e,t,n){var r=!0,o=!0;if(!P(e))throw new TypeError;return n===!1?r=!1:M(n)&&(r="leading"in n?n.leading:r,o="trailing"in n?n.trailing:o),n={},n.leading=r,n.maxWait=t,n.trailing=o,Pe(e,t,n)}function Oe(e,t){return m(t,16,[e])}function Ye(e,t,n){var r=typeof e;if(null==e||"function"==r)return l(e,t,n);if("object"!=r)return He(e);var o=Zt(e);return function(t){for(var n=o.length,r=!1;n--&&(r=t[o[n]]===e[o[n]]););return r}}function qe(e){return null==e?"":String(e).replace(Xt,v)}function Fe(e){return e}function Ue(e){W(_(e),function(t){var n=o[t]=e[t];o.prototype[t]=function(){var e=[this.__wrapped__];Mt.apply(e,arguments);var t=n.apply(o,e);return this.__chain__?new i(t,!0):t}})}function Ge(){return Ct._=jt,this}function He(e){return function(t){return t[e]}}function Ze(e,t){return null==e&&null==t&&(t=1),e=+e||0,null==t?(t=e,e=0):t=+t||0,e+$t(Ft()*(t-e+1))}function Ve(e,t){if(e){var n=e[t];return P(n)?e[t]():n}}function Je(e,t,r){var i=o,a=i.templateSettings;e=String(e||""),r=k({},r,a);var s=0,l="__p += '",u=r.variable,c=RegExp((r.escape||ut).source+"|"+(r.interpolate||ut).source+"|"+(r.evaluate||ut).source+"|$","g");e.replace(c,function(t,r,o,i,a){return l+=e.slice(s,a).replace(ct,n),r&&(l+="' +\n_.escape("+r+") +\n'"),i&&(l+="';\n"+i+";\n__p += '"),o&&(l+="' +\n((__t = ("+o+")) == null ? '' : __t) +\n'"),s=a+t.length,t}),l+="';\n",u||(u="obj",l="with ("+u+" || {}) {\n"+l+"\n}\n"),l="function("+u+") {\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n"+l+"return __p\n}";try{var f=Function("_","return "+l)(i)}catch(p){throw p.source=l,p}return t?f(t):(f.source=l,f)}function We(e,t,n){e=(e=+e)>-1?e:0;var r=-1,o=Array(e);for(t=l(t,n,1);++r<e;)o[r]=t(r);return o}function Xe(e){return null==e?"":String(e).replace(Wt,w)}function Ke(e){var t=++it+"";return e?e+t:t}function et(e){return e=new i(e),e.__chain__=!0,e}function tt(e,t){return t(e),e}function nt(){return this.__chain__=!0,this}function rt(){return this.__wrapped__}var ot,it=0,at={},st=+new Date+"",lt=/<%=([\s\S]+?)%>/g,ut=/($^)/,ct=/['\n\r\t\u2028\u2029\\]/g,ft="[object Arguments]",pt="[object Array]",dt="[object Boolean]",ht="[object Date]",gt="[object Function]",mt="[object Number]",vt="[object Object]",At="[object RegExp]",yt="[object String]",wt={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},bt={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},Ct=wt[typeof window]&&window||this,Tt=wt[typeof exports]&&exports&&!exports.nodeType&&exports,kt=wt[typeof module]&&module&&!module.nodeType&&module,_t=kt&&kt.exports===Tt&&Tt,xt=wt[typeof global]&&global;!xt||xt.global!==xt&&xt.window!==xt||(Ct=xt);var St=[],zt=Object.prototype,jt=Ct._,Et=zt.toString,It=RegExp("^"+String(Et).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Rt=Math.ceil,$t=Math.floor,Pt=zt.hasOwnProperty,Mt=St.push,Bt=zt.propertyIsEnumerable,Qt=y(Qt=Object.create)&&Qt,Nt=y(Nt=Array.isArray)&&Nt,Dt=Ct.isFinite,Lt=Ct.isNaN,Ot=y(Ot=Object.keys)&&Ot,Yt=Math.max,qt=Math.min,Ft=Math.random;i.prototype=o.prototype;var Ut={};!function(){var e={0:1,length:1};Ut.spliceObjects=(St.splice.call(e,0,1),!e[0])}(1),o.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:lt,variable:""},Qt||(s=function(){function e(){}return function(t){if(M(t)){e.prototype=t;var n=new e;e.prototype=null}return n||Ct.Object()}}()),b(arguments)||(b=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Pt.call(e,"callee")&&!Bt.call(e,"callee")||!1});var Gt=Nt||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Et.call(e)==pt||!1},Ht=function(e){var t,n=e,r=[];if(!n)return r;if(!wt[typeof e])return r;for(t in n)Pt.call(n,t)&&r.push(t);return r},Zt=Ot?function(e){return M(e)?Ot(e):[]}:Ht,Vt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Jt=S(Vt),Wt=RegExp("("+Zt(Jt).join("|")+")","g"),Xt=RegExp("["+Zt(Vt).join("")+"]","g"),Kt=function(e,t){var n,r=e,o=r;if(!r)return o;if(!wt[typeof r])return o;for(n in r)if(t(r[n],n,e)===at)return o;return o},en=function(e,t){var n,r=e,o=r;if(!r)return o;if(!wt[typeof r])return o;for(n in r)if(Pt.call(r,n)&&t(r[n],n,e)===at)return o;return o};P(/x/)&&(P=function(e){return"function"==typeof e&&Et.call(e)==gt});var tn=g(function(e,t,n){Pt.call(e,n)?e[n]++:e[n]=1}),nn=g(function(e,t,n){(Pt.call(e,n)?e[n]:e[n]=[]).push(t)}),rn=g(function(e,t,n){e[n]=t}),on=ee,an=y(an=Date.now)&&an||function(){return(new Date).getTime()};o.after=Ee,o.bind=Ie,o.bindAll=Re,o.chain=et,o.compact=de,o.compose=$e,o.countBy=tn,o.debounce=Pe,o.defaults=k,o.defer=Me,o.delay=Be,o.difference=he,o.filter=Z,o.flatten=me,o.forEach=W,o.functions=_,o.groupBy=nn,o.indexBy=rn,o.initial=Ae,o.intersection=ye,o.invert=S,o.invoke=K,o.keys=Zt,o.map=ee,o.max=te,o.memoize=Qe,o.min=ne,o.omit=Y,o.once=Ne,o.pairs=q,o.partial=De,o.pick=F,o.pluck=on,o.range=Ce,o.reject=ie,o.rest=Te,o.shuffle=se,o.sortBy=ce,o.tap=tt,o.throttle=Le,o.times=We,o.toArray=fe,o.union=_e,o.uniq=xe,o.values=U,o.where=pe,o.without=Se,o.wrap=Oe,o.zip=ze,o.collect=ee,o.drop=Te,o.each=W,o.extend=C,o.methods=_,o.object=je,o.select=Z,o.tail=Te,o.unique=xe,o.clone=T,o.contains=G,o.escape=qe,o.every=H,o.find=V,o.has=x,o.identity=Fe,o.indexOf=ve,o.isArguments=b,o.isArray=Gt,o.isBoolean=z,o.isDate=j,o.isElement=E,o.isEmpty=I,o.isEqual=R,o.isFinite=$,o.isFunction=P,o.isNaN=B,o.isNull=Q,o.isNumber=N,o.isObject=M,o.isRegExp=D,o.isString=L,o.isUndefined=O,o.lastIndexOf=be,o.mixin=Ue,o.noConflict=Ge,o.random=Ze,o.reduce=re,o.reduceRight=oe,o.result=Ve,o.size=le,o.some=ue,o.sortedIndex=ke,o.template=Je,o.unescape=Xe,o.uniqueId=Ke,o.all=H,o.any=ue,o.detect=V,o.findWhere=J,o.foldl=re,o.foldr=oe,o.include=G,o.inject=re,o.first=ge,o.last=we,o.sample=ae,o.take=ge,o.head=ge,Ue(o),o.VERSION="2.4.2",o.prototype.chain=nt,o.prototype.value=rt,W(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=St[e];o.prototype[e]=function(){var e=this.__wrapped__;return t.apply(e,arguments),Ut.spliceObjects||0!==e.length||delete e[0],this}}),W(["concat","join","slice"],function(e){var t=St[e];o.prototype[e]=function(){var e=this.__wrapped__,n=t.apply(e,arguments);return this.__chain__&&(n=new i(n),n.__chain__=!0),n}}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Ct._=o,define("underscore",[],function(){return o})):Tt&&kt?_t?(kt.exports=o)._=o:Tt._=o:Ct._=o}).call(this),define("config",[],function(){"use strict";return{services:"/services/",imagesLoadedTimeout:4e3,globalHeaderTimeout:4e3,globalHeaderOffSet:80}}),define("marionette.subapprouter",["underscore","backbone","marionette"],function(e,t,n){return n.SubAppRouter=n.AppRouter.extend({constructor:function(r,o){var i,a,s,l={};o=o||{},r=r||this.prefix||"",i=o.controller||this.controller||{},s=o.createTrailingSlashRoutes||this.createTrailingSlashRoutes||!1,a=e.clone(o.appRoutes||this.appRoutes),this.separator="/"===r.slice(-1)?"":"/",a&&(this.controller=i,e.each(a,function(e,t){t?("/"===t.substr(0)&&(t=t.substr(1,t.length)),l[r+this.separator+t]=e,s&&(l[r+this.separator+t+"/"]=e)):(l[r]=e,s&&(l[r+"/"]=e))},this),this.appRoutes=l),n.AppRouter.prototype.constructor.call(this,o);var u;u=t.history.fragment?t.history.getFragment():t.history.getHash(),e.every(this.appRoutes,function(e,n){return u.match(t.Router.prototype._routeToRegExp(n))?(t.history.loadUrl(u),!1):!0},this),this.postInitialize&&this.postInitialize(o)}}),n}),function(e){define("refresh",["jquery","TweenLite","cssPlugin","easePack"],function(){return function(){return function(e){"use strict";function t(t,r){var i=this;i.element=t,i.$element=e(t),i.options=e.extend({},o,r),i._defaults=o,i._name=n,i.init()}var n="refresh",r=e("<div/>"),o={activeClass:"refresh--is-active",nextClass:"refresh--is-next",animationClass:"refresh--is-animating",autoRefresh:!1,autoRefreshTime:2e4,childSelector:".item",buttonPosition:"right"};t.prototype={currentBreakpoint:null,numContainers:null,$refreshRow:null,$containers:null,$tiles:null,$button:null,init:function(){var e=this,t=e.options;t.App&&t.App.vent.on("window:breakpoint:changed",function(t){clearTimeout(e.loop),e.update(t)}),e.$tiles=e.$element.find(t.childSelector).detach(),e.buildTileReference(),e.build(t.currentBreakpoint),t.autoRefresh&&e.autoRefresh()},buildTileReference:function(){var e=this;e.$tiles.size()<8&&(e.$tiles=e.$tiles.add(e.$tiles.clone(!0)),e.buildTileReference())},autoRefresh:function(){var e=this,t=e.options;!function n(){e.loop=setTimeout(function(){_.isNull(e.$button)||e.$button.click(),n()},t.autoRefreshTime)}()},refreshIt:function(e){e.preventDefault();var t=this;t.$containers.addClass(t.options.animationClass),t.animationReset()},build:function(t){var n=this,o=n.options;n.$refreshRow=r.clone(),n.currentBreakpoint=t,n.buildContainers(),n.buildRefreshButton(),n.$refreshRow=n.$refreshRow.children(),n.$element.append(n.$refreshRow),e.isFunction(n.walkNext)||n._makeArrayWalkable(n.$tiles),n.fillContainers(0,o.activeClass),n.fillContainers(1,o.nextClass),n.$element.find(".previous-tiles").removeClass("previous-tiles")},buildContainers:function(){var t=this,n=0,r=t.options,o=e(r.templates.container);for(t.numContainers=r.responsive[t.currentBreakpoint].containers;n<t.numContainers;n++)t.$refreshRow.append(o.clone().addClass("container-"+n));t.$containers=t.$refreshRow.find(".refresh")},buildRefreshButton:function(){var t,r,o=this,i=o.numContainers<o.$tiles.size(),a=_.once(o.checkForTitleTile);i&&(t=o.options,r=t.buttonPosition,o.$button=e(t.templates.button).on("click."+n,function(e){clearTimeout(o.loop),o.$element.find(".refresh").hasClass(t.animationClass)||(o.animateRefreshButton(this),o.refreshIt.call(o,e),a(o,o.$element))}),"left"===r?o.$refreshRow.find(".refresh").first().before(o.$button):"right"===r?o.$refreshRow.find(".refresh").last().after(o.$button):e.isNumeric(r)&&o.$refreshRow.find(".refresh").eq(r).after(o.$button))},checkForTitleTile:function(e,t){t.hasClass("section-ends")&&e.removeTitleTile()},removeTitleTile:function(){var t=this;t.$tiles.each(function(n){e(this).hasClass("tile--title")&&t.$tiles.splice(n,1)})},animateRefreshButton:function(t){var n=e(t),r=n.find(".half-circle"),o=n.find(".cog");TweenLite.to(r,.415,{rotation:"180_ccw",opacity:1,ease:"linear",onComplete:function(){TweenLite.to(r,.415,{rotation:"360_ccw",opacity:0,ease:"Cubic.easeOut",onComplete:function(){TweenLite.killTweensOf(r)}})}}),TweenLite.to(o,.415,{rotation:"15deg_ccw",opacity:1,ease:"linear",onComplete:function(){TweenLite.to(o,.8,{rotation:"30deg_ccw",opacity:0,ease:"linear",onComplete:function(){TweenLite.killTweensOf(o)}})}})},fillContainers:function(t,n){var r=this;r.$containers.each(function(){var o=r.$tiles.walkNext();o&&e(this).find(".refresh__position").eq(t).addClass(n).append(o)})},animationReset:function(){var t,n=this,r=n.options,o=r.activeClass,i=r.nextClass,a=r.animationClass,s=0,l=[];t=n.$element.find("."+o),s=t.find(".item").size()-1,n.$element.find("."+i).css({display:"none"}),t.find(".item").each(function(t){var o=e(this),i={$element:n.$element,refresh:n,$tile:o,animatingClass:a,activeClass:r.activeClass,nextClass:r.nextClass};l[t]=e.Deferred(),TweenLite.set(o,{clearProps:"all"}),Modernizr.csstransitions?(setTimeout(function(){o.addClass("previous-tiles").removeClass("show-tiles")},150*t),o.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){n.switchTiles(o,i),l[t].resolve(i)})):(o.addClass("hide-tiles").removeClass("show-tiles"),n.switchTiles(o,i),l[t].resolve(i))}),e.when.apply(e,l).done(function(e){l=null,n.animateNextTileIn(e,!0)})},switchTiles:function(e,t){var n=this,r=e.closest(".refresh").find("."+t.nextClass),o=r.find(".item");t.$element.trigger("refresh:animation:complete",o),n.animateNextTileIn(t,!1)},animateNextTileIn:function(e,t){var n=this,r=e.$tile.closest(".refresh").find("."+e.nextClass),o=r.find(".item"),i=300;if(t)return void setTimeout(function(){n.fillNextTilePosition(e.nextClass),n.$element.find("."+e.animatingClass).removeClass(e.animatingClass),e=null},i+100);e.$tile.parent().css({display:"none"}).removeClass(e.activeClass).addClass(e.nextClass).empty(),r.css({display:"block"}),o.removeClass("previous-tiles").addClass("hide-tiles").find(".lazy-load-bg-img").removeClass("lazy-load-bg-img");var a=setTimeout(function(){o.removeClass("hide-tiles").addClass("show-tiles").closest(".refresh").find(".refresh--is-next .lazy-load-bg-img").removeClass("lazy-load-bg-img"),clearTimeout(a)},10);i=o.css("animation-duration"),i=i?1e3*Number(i.replace("s","")).toFixed(1):0,r.removeClass(e.nextClass).addClass(e.activeClass)},fillNextTilePosition:function(t){var n=this;n.$element.find("."+t).each(function(){var t=n.$tiles.walkNext();t?e(this).append(t):(n.$tiles.walkReset(),t=n.$tiles.walkNext(),t&&e(this).append(t))})},update:function(e){var t=this;t.teardown(),t.build(e.current)},teardown:function(){var e=this;e.$tiles.walkReset(),e.$refreshRow instanceof jQuery&&e.$refreshRow.remove(),e.$containers instanceof jQuery&&e.$containers.remove(),e.$refreshRow=null,e.$containers=null},destroy:function(){var t=this;clearTimeout(t.loop),t.teardown(),e.removeData(t,"plugin_"+n),t.$button.off("click."+n)},_makeArrayWalkable:function(t){var n=-1,r={walkReset:function(){return n=-1},walkNext:function(){return n++>=this.length?void n--:this[n]}};return e.extend(t,r)}},e.fn[n]=function(r){return this.each(function(){var o=this;e.data(o,"plugin_"+n)||e.data(o,"plugin_"+n,new t(o,r))})}}(jQuery),jQuery.fn.refresh}.apply(e,arguments)})}(this),function(e){define("onScreen",["jquery"],function(){return function(){return function(e){e.fn.onScreen=function(t){var n={container:window,direction:"vertical",toggleClass:null,doIn:null,doOut:null,tolerance:0,throttle:null,lazyAttr:null,lazyPlaceholder:"data:image/gif;base64,R0lGODlhEAAFAIAAAP///////yH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCQAAACwAAAAAEAAFAAACCIyPqcvtD00BACH5BAkJAAIALAAAAAAQAAUAgfT29Pz6/P///wAAAAIQTGCiywKPmjxUNhjtMlWrAgAh+QQJCQAFACwAAAAAEAAFAIK8urzc2tzEwsS8vrzc3tz///8AAAAAAAADFEiyUf6wCEBHvLPemIHdTzCMDegkACH5BAkJAAYALAAAAAAQAAUAgoSChLS2tIyKjLy+vIyOjMTCxP///wAAAAMUWCQ09jAaAiqQmFosdeXRUAkBCCUAIfkECQkACAAsAAAAABAABQCDvLq83N7c3Nrc9Pb0xMLE/P78vL68/Pr8////AAAAAAAAAAAAAAAAAAAAAAAAAAAABCEwkCnKGbegvQn4RjGMx8F1HxBi5Il4oEiap2DcVYlpZwQAIfkECQkACAAsAAAAABAABQCDvLq85OLkxMLE9Pb0vL685ObkxMbE/Pr8////AAAAAAAAAAAAAAAAAAAAAAAAAAAABCDwnCGHEcIMxPn4VAGMQNBx0zQEZHkiYNiap5RaBKG9EQAh+QQJCQAJACwAAAAAEAAFAIOEgoTMysyMjozs6uyUlpSMiozMzsyUkpTs7uz///8AAAAAAAAAAAAAAAAAAAAAAAAEGTBJiYgoBM09DfhAwHEeKI4dGKLTIHzCwEUAIfkECQkACAAsAAAAABAABQCDvLq85OLkxMLE9Pb0vL685ObkxMbE/Pr8////AAAAAAAAAAAAAAAAAAAAAAAAAAAABCAQSTmMEGaco8+UBSACwWBqHxKOJYd+q1iaXFoRRMbtEQAh+QQJCQAIACwAAAAAEAAFAIO8urzc3tzc2tz09vTEwsT8/vy8vrz8+vz///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAEIhBJWc6wJZAtJh3gcRBAaXiIZV2kiRbgNZbA6VXiUAhGL0QAIfkECQkABgAsAAAAABAABQCChIKEtLa0jIqMvL68jI6MxMLE////AAAAAxRoumxFgoxGCbiANos145e3DJcQJAAh+QQJCQAFACwAAAAAEAAFAIK8urzc2tzEwsS8vrzc3tz///8AAAAAAAADFFi6XCQwtCmAHbPVm9kGWKcEQxkkACH5BAkJAAIALAAAAAAQAAUAgfT29Pz6/P///wAAAAIRlI8SAZsPYnuJMUCRnNksWwAAOw==",debug:!1};return"remove"!=t&&e.extend(n,t),this.each(function(){function r(){e(f).off("scroll.onScreen resize.onScreen"),e(window).off("resize.onScreen")}function o(){return _?b<v-n.tolerance&&p<b+y-n.tolerance:b<g-n.tolerance&&b>-y+n.tolerance}function i(){return _?b+(y-n.tolerance)<p||b>v-n.tolerance:b>g-n.tolerance||-y+n.tolerance>b}function a(){return _?C<A-n.tolerance&&d<C+w-n.tolerance:C<m-n.tolerance&&C>-w+n.tolerance}function s(){return _?C+(w-n.tolerance)<d||C>A-n.tolerance:C>m-n.tolerance||-w+n.tolerance>C}function l(){return T?!1:"horizontal"===n.direction?a():o()}function u(){return T?"horizontal"===n.direction?s():i():!1}function c(e,t,n){var r,o,i;return function(){o=arguments,i=!0,n=n||this,r||!function(){i?(e.apply(n,o),i=!1,r=setTimeout(arguments.callee,t)):r=null}()}}var f=this;if("remove"===t)return void r();var p,d,h,g,m,v,A,y,w,b,C,T=!1,k=e(this),_=e.isWindow(n.container),x=function(){if(_||"static"!==e(n.container).css("position")||e(n.container).css("position","relative"),h=e(n.container),g=h.height(),m=h.width(),v=h.scrollTop()+g,A=h.scrollLeft()+m,y=k.outerHeight(!0),w=k.outerWidth(!0),_){var t=k.offset();b=t.top,C=t.left}else{var r=k.position();b=r.top,C=r.left}if(p=h.scrollTop(),d=h.scrollLeft(),n.debug&&(0,0),l()){if(n.toggleClass&&k.addClass(n.toggleClass),e.isFunction(n.doIn)&&n.doIn.call(k[0]),n.lazyAttr&&"IMG"===k.prop("tagName")){var o=k.attr(n.lazyAttr);k.css({background:"url("+n.lazyPlaceholder+") 50% 50% no-repeat",minHeight:"5px",minWidth:"16px"}),k.prop("src",o)}T=!0}else u()&&(n.toggleClass&&k.removeClass(n.toggleClass),e.isFunction(n.doOut)&&n.doOut.call(k[0]),T=!1)};window.location.hash?c(x,50):x(),n.throttle&&(x=c(x,n.throttle)),e(n.container).on("scroll.onScreen resize.onScreen",x),_||e(window).on("resize.onScreen",x),"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=jQuery:"function"==typeof define&&define.amd&&define("jquery-onscreen",[],function(){return jQuery})})}}(jQuery),jQuery.fn.onScreen}.apply(e,arguments)})}(this),define("modules/menu",["infrastructure-b91b738d"],function(){"use strict";var e=function(e){function t(){var t,r=f(window.location.pathname)[0];r?t=m.find('[href*="'+r+'"]'):""===r&&(t=m.find('[href="/"]')),n(),l(t),e.windowManager.$window.on("popstate",function(){var e=f(window.location.pathname)[0];l(c(m,e))}),u()}function n(){p.on("click",i),d.on("click",i),v.on("click",o),e.vent.on("menu:update",function(e){var t=f(e)[0];l(c(m,t))}),e.main.on("page:transition:end",r),e.vent.on("page:loader:remove",r),e.main.on("page:duplicate",a)}function r(){s()&&a()}function o(e){l($(e.target))}function i(e){e.preventDefault(),a()}function a(){h.toggleClass("nav--is-open"),A=h.hasClass("nav--is-open"),A?dataLayer.push({"Menu Navigation":"opened"}):dataLayer.push({"Menu Navigation":"closed"})}function s(){return A}function l(e){m.find(".menu--is-active").removeClass("menu--is-active"),e.addClass("menu--is-active")}function u(){var e=$('<a id="menu--close-sidebar" class="menu--close-sidebar" href="#"/>');e.on("click",function(e){e.preventDefault(),a()}),g.prepend(e)}function c(e,t){return e.find('a[href*="'+t+'"]')}function f(e){var t=e.split("/");return""===t[0]&&t.shift(),t}var p=$("#menu-button"),d=$("#menu-button-close"),h=e.windowManager.$body,g=$("#nav"),m=g.find(".menu__item"),v=m.find("a"),A=!1;return t(),{getMenuOpen:s,toggleMenu:a}};return e}),define("modules/pageManager",["infrastructure-b91b738d"],function(){"use strict";var e=function(e){var t,n,r,o,i,a,s=$('<div id="loader" class="loader transparent"/>');return a={initialize:function(e){var a=this;t=$.extend({},e,t),i=t.app,r=$("title"),o=$("#page-title"),n=$("#global-header"),i.vent.on("page:loader:add",a.addLoader),i.vent.on("page:loader:remove",a.removeLoader),a.setBodyPadding(),i.vent.on("window:resized",a.setBodyPadding),i.main.on("page:transition",function(e,t){a.updatePageTitle(t.options.htmlObject.title),a.focusPageTitle()})},updatePageTitle:function(e){var t=e.replace(/\s+/g,"-").toLowerCase();"index"===i.currentApp.moduleName?(t=i.currentApp.moduleName,o.html("&nbsp;")):o.html(e),
i.windowManager.$body.removeClass(function(e,t){return(t.match(/(^|\s)page--\S+/g)||[]).join(" ")}).addClass("page--"+t),this.setBodyPadding(),r.html(e)},focusPageTitle:function(){try{o.focus()}catch(e){}},scrollPage:function(e,t){e=e||0,t=t||1,i.windowManager.$htmlAndBody.animate({scrollTop:e},t,"linear")},setBodyPadding:function(){i.windowManager.$body.hasClass("page--index")?$("html").css({paddingTop:0}):$("html").css({paddingTop:n.height()})},addLoader:function(){s=s.appendTo(i.windowManager.$body),setTimeout(function(){s.removeClass("transparent")},10)},removeLoader:function(){s.addClass("transparent"),setTimeout(function(){s=s.remove()},400)}},a.initialize(e),{scrollPage:a.scrollPage}};return e}),function(e){define("scrollStop",["jquery"],function(){return function(){return function(e){var t=e.event.dispatch||e.event.handle,n=e.event.special,r="D"+ +new Date,o="D"+(+new Date+1);n.scrollstart={setup:function(o){var i,a=e.extend({latency:n.scrollstop.latency},o),s=function(e){var n=this,r=arguments;i?clearTimeout(i):(e.type="scrollstart",t.apply(n,r)),i=setTimeout(function(){i=null},a.latency)};e(this).bind("scroll",s).data(r,s)},teardown:function(){e(this).unbind("scroll",e(this).data(r))}},n.scrollstop={latency:250,setup:function(r){var i,a=e.extend({latency:n.scrollstop.latency},r),s=function(e){var n=this,r=arguments;i&&clearTimeout(i),i=setTimeout(function(){i=null,e.type="scrollstop",t.apply(n,r)},a.latency)};e(this).bind("scroll",s).data(o,s)},teardown:function(){e(this).unbind("scroll",e(this).data(o))}}}(jQuery),jQuery.fn.scrollStop}.apply(e,arguments)})}(this),define("modules/windowManager",["infrastructure-b91b738d","scrollStop"],function(){"use strict";var e=function(e){var t,n,r,o,i,a=$(window),s=$(document),l=s.find("body"),u=l.add("html"),c=!1,f=null,p=null,d=null,h={start:!1,stop:!1,up:!1,down:!1},g={initialize:function(e){var o=this,i=75,l={scroll:_.throttle(function(e){o.scrolled(e)},i,{trailing:!1}),resize:_.throttle(o.resized,i,{trailing:!1})};n=$.extend({},e,n),t=n.app,r=o.getBreakPoint(),a=$(window),s=$(document),a.on("scrollstart.windowManager",function(){l.scroll.call(o,"start")}).on("scroll.windowManager",function(){l.scroll.call(o)}).on("scrollstop.windowManager",function(){l.scroll.call(o,"stop")}).on("onorientationchange.windowManager",function(){l.resize.call(o)}).on("resize.windowManager",function(){l.resize.call(o)}).on("touchmove.windowManager",function(){l.scroll.call(o)}),n.scrollPos=a.scrollTop(),n.isScrolling=!1,o.setHeights()},scrolled:function(e){var n=this,r=0;n.addScrollPerformance(),n.updateScrollData(e),t.vent.trigger("window:scrolled",h),n.setHeights(),r=a.scrollTop()+o+.2*o,r>=i&&!p&&(t.vent.trigger("window:scrolled:bottom",h),p=setTimeout(function(){clearTimeout(p),p=null},250))},updateScrollData:function(e){var t=a.scrollTop();return h.currentScrollPos=t,"start"===e?(h.start=!0,h.stop=!1):"stop"===e?(h.start=!1,h.stop=!0):(h.start=!1,h.stop=!1),n.scrollPos<=t?(h.up=!1,h.down=!0):(h.up=!0,h.down=!1),n.scrollPos=t,h},resized:function(){var e=this,n=e.getBreakPoint();e.setHeights(),e.setAspectRatioClass(),clearTimeout(f),c=!0,!l.hasClass("is-resizing")&&l.addClass("is-resizing"),f=setTimeout(function(){clearTimeout(f),f=null,c=!1,l.removeClass("is-resizing")},300),t.vent.trigger("window:resized"),r!==n&&(t.vent.trigger("window:breakpoint:changed",{old:r,current:n}),r=n)},setHeights:function(){o=a.height(),i=s.height()},addScrollPerformance:function(){l.hasClass("page--work")||(clearTimeout(d),!l.hasClass("disable-hover")&&l.addClass("disable-hover is-scrolling"),d=setTimeout(function(){l.removeClass("disable-hover is-scrolling")},250))},getBreakPoint:function(){return _.isFunction(window.getComputedStyle)?window.getComputedStyle(document.body,":after").getPropertyValue("content").replace(/\"|\'/g,""):"m"},setAspectRatioClass:function(){var e=a.height(),t=a.width(),n="portrait landscape square",r=e/t;r>1.18?(l.removeClass(n),l.addClass("portrait")):.6>r?(l.removeClass(n),l.addClass("landscape")):(l.removeClass(n),l.addClass("square"))}};return g.initialize(e),a.resize(),{$window:a,$document:s,$body:l,$htmlAndBody:u,isResizing:c,getBreakPoint:g.getBreakPoint,windowHeight:o,documentHeight:i,getScrollData:g.updateScrollData}};return e}),define("modules/services",[],function(){"use strict";var e=function(e){var t=function(t){var n=!e.config.debug;return _.isEmpty(e.bootstrapItems)?n&&!_.isEmpty(e.storage)&&_.isFunction(e.storage.status)&&e.storage.status(t)?e.storage.get(t):$.ajax({dataType:"json",url:e.config.services+t,success:function(r){n&&!_.isUndefined(e.storage)&&null!==e.storage&&e.storage.set(t,r)}}):e.bootstrapItems};e.reqres.setHandler("services:page:full",function(e,n){return t(e,n)})};return e}),define("apps/master/regions/transitionRegion",["apps/master/masterApp"],function(e){"use strict";return Marionette.Region.extend({el:"#main",viewCache:[],initialize:function(t){var n=this;e=t,n.listenTo(n,"page:transition",n.transitionPage),n.listenTo(n,"page:update",function(e,t){var r=n.viewCache[0];t.options.attach?n.transitionPage(e,t,r):n.trigger("page:transition",e,t,r)})},_getPathName:function(){var e=document.location.pathname.split("/");return e.shift(""),e.join(" > ")},transitionPage:function(e,t,n){var r=this;return r._ensureElement(),t.options.attach?(r.attachView(t),r.viewCache.push(t),void dataLayer.push({event:"pageLoad",pageName:r._getPathName()})):(r.stopListening(t,"render"),r.listenTo(t,"render",function(){r.transition(e,t,n)}),void t.render())},transition:function(t,n,r){var o=this;_.isUndefined(r)||r.$el.wrap('<div class="previous-view-container"><div="previous-view"></div></div>'),o.$el.append(n.el),o.on("page:transition:end",_.bind(o.transitionCleanup,o,n)),n.$el.wrap('<div class="next-view-container"><div class="next-view"></div></div>'),o.listenToOnce(n,"window:images:loaded",function(){dataLayer.push({event:"pageLoad",pageName:o._getPathName()}),e.pageManager.scrollPage(),e.vent.trigger("page:loader:remove"),n.$el.closest(".next-view-container").addClass("reveal-view"),n.$el.closest(".next-view-container").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){var e=n.$el.parent().parent();e.parent().append(n.$el).end().remove(),o.trigger("page:transition:end"),$("#main .previous-view-container").remove()})})},transitionCleanup:function(e){var t,n=this;n.off("page:transition:end"),t=n.viewCache.shift(),t&&t.destroy(),n.viewCache.push(e),n.currentView=e,Marionette.triggerMethod.call(e,"show"),Marionette.triggerMethod.call(n,"show",e)}})}),define("modules/storage",["jquery","underscore"],function(e,t){"use strict";var n=function(n,r,o){function i(){var e=!0;try{window.localStorage.getItem("a")}catch(t){e=!1}return e}function a(){var e=!0;try{window.sessionStorage.getItem("a")}catch(t){e=!1}return e}function s(){return i()||a()}function l(e){return"string"!=typeof e&&(0,e=String(e)),e}function u(n,i,a,s){var u,c,f,p;t.isFunction(a)&&(s=a,a=null),u=new e.Deferred,c=u.promise(),f=new Date,a||(a=3600),p=Math.round(f.setSeconds(f.getSeconds()+a)/1e3),n=l(n),void 0===i&&(i=null);var h=i;return d(i,function(e,t){if(t)u.reject(t);else{try{r.setItem(o+n,e),r.setItem(o+n+"_time",p)}catch(i){0,("QuotaExceededError"===i.name||"NS_ERROR_DOM_QUOTA_REACHED"===i.name)&&u.reject(i)}u.resolve(h)}}),g(c,s),c}function c(t,n){var i,a,u=null;if(s())return i=new e.Deferred,a=i.promise(),t=l(t),p(t)&&(u=r.getItem(o+t),u&&(u=h(u))),i.resolve(u),g(a,n),a}function f(e){s()&&(e=l(e),r.removeItem(o+e),r.removeItem(o+e+"_time"))}function p(e){var t=new Date,n=Math.round(+t/1e3),i=r.getItem(o+e+"_time");if(s())return i||(i=0),n>i?(f(e),!1):!0}function d(n,r){var o={dataType:null,value:n};t.isString(n)?o.dataType="string":n instanceof e?(o.dataType="jquery",o.value=e("<div>").append(n.clone()).remove().html()):t.isObject(n)&&(o.dataType="object"),r(JSON.stringify(o))}function h(t){return t=JSON.parse(t),t="object"===t.dataType?t.value:"jquery"===t.dataType?e(t.value):t.value}function g(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}var m={};return o=o||"global.",m.set=u,m.get=c,m.status=p,m.removeItem=f,m.isStorageEnabled=s,a()&&"sessionStorage"===r?r=sessionStorage:i()&&(r=localStorage),m};return n}),define("modules/navigate",["jquery"],function(e){"use strict";return function(t){function n(e,t){var n=e;return-1!==n.indexOf(":")&&(n=n.replace(/.*:\/\/[^\/]+/,"")),n.indexOf(t)||(n=n.substr(t.length)),n.replace(/^[#\/]/,"")}function r(e){var n=Backbone.history.navigate(e,{trigger:!0});return n&&t.vent.trigger("window:navigated"),n}function o(){var o="#menu-button, #menu-button-close, .home, .tile--link, .ignore-click";e("body").on("click","a:internal:not("+o+")",function(o){var i,a,s=e(this),l=s.attr("href");return 2===o.which||o.metaKey?!0:history.pushState&&!Modernizr.touch?(o.preventDefault(),i=n(l),a=window.location.pathname.replace("/",""),a!==i&&r(i,{trigger:!0})?(t.vent.trigger("menu:update",i),t.vent.trigger("page:loader:add")):t.main.trigger("page:duplicate"),!1):void 0})}var i={},a=document.location.protocol+"//"+(document.location.hostname||document.location.host)+(document.location.port?":"+document.location.port:"")+"/";return e.expr[":"].internal=function(t){var n=e(t).attr("href")||"";return n.match(/^#/)||""===n?!1:n.substring(0,a.length)===a||-1===n.indexOf(":")},i.go=r,o(),i}}),define("apps/master/masterApp",["settings","config","infrastructure-b91b738d","modules/menu","modules/pageManager","modules/windowManager","modules/services","apps/master/regions/transitionRegion","modules/storage","modules/navigate","modules/headerInview-d839b6dc"],function(e,t,n,r,o,i,a,s,l,u,c){"use strict";var f=new Marionette.Application;return f.currentSubApps=[],f.addRegions({nav:"#nav"}),f.main=new s(f),new a(f),f.navigate=new u(f),f.addInitializer(function(n){f.config={},_.extend(f.config,t,e),f.namespaces=n.namespaces,f.storage=new l(f),f.storage.isStorageEnabled()||(f.storage=null),f.router=new n.router({controller:n.controller}),f.windowManager=new i({app:f}),f.pageManager=new o({app:f}),f.menu=new r(f),c(f,$("#global-header"),{offset:f.config.globalHeaderOffSet,timeOut:f.config.globalHeaderTimeout}),f.config.debug&&(window.App=f)}),f.on("start",function(){_.isUndefined(Backbone.history)||Backbone.history.start({pushState:!0,hashChange:!1})}),f.startSubApp=function(e,t){var n=f.module(e);f.currentApp!==n&&(f.currentApp&&f.currentApp.stop(),f.currentApp=n,n.start(t))},f}),define("apps/master/routers/router",["infrastructure-b91b738d"],function(){"use strict";return Marionette.AppRouter.extend({appRoutes:{"":"index",":namespace(/*subroute)":"invokeSubRoute"}})}),define("apps/master/controllers/controller",["apps/master/masterApp"],function(e){"use strict";var t=Marionette.Controller.extend({index:function(){var e=this;e._checkForBootstrapPage("index"),e.invokeSubApp("indexApp","index")},invokeSubRoute:function(t,n){var r=this,o=$("#main").find(".is-error");return!_.contains(e.namespaces,t)||o.size()>0?(r._checkForBootstrapPage("404"),e.bootstrapItems={},r.invokeSubApp("404App","404"),void $("body").off("click")):(n=n||"",r._checkForBootstrapPage(t),void r.invokeSubApp(t+"App",t))},invokeSubApp:function(t,n){require([t],function(){e.startSubApp(n)})},_checkForBootstrapPage:function(t){var n=$("#main__"+t);n.size()?(e.bootstrapItems={wrapper:n,body:[]},n.children().each(function(t,n){var r=$(n);e.bootstrapItems.body.push({type:r.data("type"),html:r})})):e.bootstrapItems={}}});return new t}),define("modules/analyticsManager",["jquery"],function(e){"use strict";var t={initialize:function(){this.delegateEvents()},customEvents:{},delegateEvents:function(){var t=this;e("body").on("click",function(n){var r=e(n.target),o=r.data("track");o&&t.addToEvents("Click:",o)})},addToEvents:function(e,t){dataLayer.push({event:t})}};return t}),function(){"use strict";function e(){var e,t,n=window.location;"pushState"in history?history.pushState("",document.title,n.pathname+n.search):(e=document.body.scrollTop,t=document.body.scrollLeft,n.hash="",document.body.scrollTop=e,document.body.scrollLeft=t)}window.isLTIE9||(require.config({waitSeconds:0,paths:{backbone:"libs/backbone/backbone","backbone.babysitter":"libs/backbone_babysitter/backbone.babysitter","backbone.wreqr":"libs/backbone_wreqr/backbone.wreqr","classie/classie":"libs/classie/classie","doc-ready/doc-ready":"libs/doc-ready/doc-ready","eventEmitter/EventEmitter":"libs/eventEmitter/EventEmitter","eventie/eventie":"libs/eventie/eventie","get-size/get-size":"libs/get-size/get-size","get-style-property/get-style-property":"libs/get-style-property/get-style-property",imagesLoaded:"libs/imagesloaded/imagesloaded-979d8150",item:"libs/packery/item",jquery:"libs/jquery/jquery-a28d1fc1",marionette:"libs/backbone_marionette/backbone.marionette-b50aa0cc",underscore:"libs/lodash/lodash.underscore","marionette.subapprouter":"modules/Marionette.SubAppRouter","matches-selector/matches-selector":"libs/matches-selector/matches-selector",moment:"libs/moment/moment","moment-timezone":"libs/moment-timezone/moment-timezone-8c654e79","outlayer/item":"libs/outlayer/item","outlayer/outlayer":"libs/outlayer/outlayer","fizzy-ui-utils/utils":"libs/fizzy-ui-utils/utils-4ed6bbb4",owlCarousel:"libs/OwlCarousel/owl.carousel",packer:"libs/packery/packer",Packery:"libs/packery/packery",rect:"libs/packery/rect",refresh:"modules/refresh",scrollStop:"libs/jquery-scrollstop/jquery.scrollstop",TweenLite:"libs/gsap/TweenLite",cssPlugin:"libs/gsap/CSSPlugin",easePack:"libs/gsap/EasePack",YTPlayer:"libs/youtubeBackground/jquery.youtubebackground",equalize:"libs/equalize/equalize-f023e3db",onScreen:"libs/onScreen/jquery.onscreen",lazyload:"libs/jquery_lazyload/jquery.lazyload",apps:"apps",modules:"modules",contactApp:"apps/contact/contactApp-721d9b03",cultureApp:"apps/culture/cultureApp-a62b399d",venturesApp:"apps/ventures/venturesApp-8252dcdb",indexApp:"apps/index/indexApp-c13ae1c7",careersApp:"apps/careers/careersApp-02c09aa8",newsApp:"apps/news/newsApp-d9f0e1f7",styleguideApp:"apps/styleguide/styleguideApp-7d7ef37b","who-we-areApp":"apps/who-we-are/who-we-areApp-a87d81a5","404App":"apps/404/404App-6aec0a2f",workApp:"apps/work/workApp-017dc7a0",termsApp:"apps/terms/termsApp-89206679"},shim:{underscore:{exports:"_"},imagesLoaded:{deps:["jquery","eventEmitter/EventEmitter","eventie/eventie"],exports:"imagesLoaded"},scrollStop:{deps:["jquery"],exports:"jQuery.fn.scrollStop"},owlCarousel:{deps:["jquery"],exports:"jQuery.fn.owlCarousel"},refresh:{deps:["jquery","TweenLite","cssPlugin","easePack"],exports:"jQuery.fn.refresh"},Packery:{deps:["jquery"],exports:"jQuery.fn.packery"},YTPlayer:{deps:["jquery"],exports:"YTPlayer"},lazyload:{deps:["jquery","scrollStop"],exports:"jQuery.fn.lazyload"},equalize:{deps:["jquery"],exports:"jQuery.fn.equalize"},onScreen:{deps:["jquery"],exports:"jQuery.fn.onScreen"},moment:{exports:"moment"},"moment-timezone":{deps:["moment"],exports:"moment-timezone"}}}),require(["jquery","marionette","apps/master/masterApp","apps/master/routers/router","apps/master/controllers/controller","modules/analyticsManager"],function(t,n,r,o,i,a){"/"===location.pathname&&""!==location.hash&&e();var s={controller:i,router:o,namespaces:["404","index","work","careers","news","culture","who-we-are","ventures","contact","work","terms","styleguide"]};a.initialize(),r.start(s)}))}(),define("main-36e63e9a",function(){}),function(e){define("lazyload",["jquery","scrollStop"],function(){return function(){return function(e,t,n,r){var o=e(t);e.fn.lazyload=function(i){function a(){var t=0;l.each(function(){var n=e(this);if(!u.skip_invisible||n.is(":visible"))if(e.abovethetop(this,u)||e.leftofbegin(this,u));else if(e.belowthefold(this,u)||e.rightoffold(this,u)){if(++t>u.failure_limit)return!1}else n.trigger("appear"),t=0})}var s,l=this,u={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return i&&(r!==i.failurelimit&&(i.failure_limit=i.failurelimit,delete i.failurelimit),r!==i.effectspeed&&(i.effect_speed=i.effectspeed,delete i.effectspeed),e.extend(u,i)),s=u.container===r||u.container===t?o:e(u.container),0===u.event.indexOf("scroll")&&s.bind(u.event,function(){return a()}),this.each(function(){var t=this,n=e(t);t.loaded=!1,(n.attr("src")===r||n.attr("src")===!1)&&n.is("img")&&n.attr("src",u.placeholder),n.one("appear",function(){if(!this.loaded){if(u.appear){var r=l.length;u.appear.call(t,r,u)}e("<img />").bind("load",function(){var r=n.attr("data-"+u.data_attribute);n.hide(),n.is("img")?n.attr("src",r):n.css("background-image","url('"+r+"')"),n[u.effect](u.effect_speed),t.loaded=!0;var o=e.grep(l,function(e){return!e.loaded});if(l=e(o),u.load){var i=l.length;u.load.call(t,i,u)}}).attr("src",n.attr("data-"+u.data_attribute))}}),0!==u.event.indexOf("scroll")&&n.bind(u.event,function(){t.loaded||n.trigger("appear")})}),o.bind("resize",function(){a()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&o.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&l.each(function(){e(this).trigger("appear")})}),e(n).ready(function(){a()}),this},e.belowthefold=function(n,i){var a;return a=i.container===r||i.container===t?(t.innerHeight?t.innerHeight:o.height())+o.scrollTop():e(i.container).offset().top+e(i.container).height(),a<=e(n).offset().top-i.threshold},e.rightoffold=function(n,i){var a;return a=i.container===r||i.container===t?o.width()+o.scrollLeft():e(i.container).offset().left+e(i.container).width(),a<=e(n).offset().left-i.threshold},e.abovethetop=function(n,i){var a;return a=i.container===r||i.container===t?o.scrollTop():e(i.container).offset().top,a>=e(n).offset().top+i.threshold+e(n).height()},e.leftofbegin=function(n,i){var a;return a=i.container===r||i.container===t?o.scrollLeft():e(i.container).offset().left,a>=e(n).offset().left+i.threshold+e(n).width()},e.inviewport=function(t,n){return!(e.rightoffold(t,n)||e.leftofbegin(t,n)||e.belowthefold(t,n)||e.abovethetop(t,n))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document),jQuery.fn.lazyload}.apply(e,arguments)})}(this),define("modules/pictureFill",["underscore","lazyload"],function(e){"use strict";return window.matchMedia||(window.matchMedia=function(){var e=window.styleMedia||window.media;if(!e){var t=document.createElement("style"),n=document.getElementsByTagName("script")[0],r=null;t.type="text/css",t.id="matchmediajs-test",n.parentNode.insertBefore(t,n),r="getComputedStyle"in window&&window.getComputedStyle(t,null)||t.currentStyle,e={matchMedium:function(e){var n="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return t.styleSheet?t.styleSheet.cssText=n:t.textContent=n,"1px"===r.width}}}return function(t){return{matches:e.matchMedium(t||"all"),media:t||"all"}}}()),function(t){var n,r=e.uniqueId("pictureFill-"),o=window,i=$(o),a={build:e.noop,destroy:e.noop};return n=e.debounce(function(){for(var e=t.getElementsByTagName("span"),n=0,r=e.length;r>n;n++)if(null!==e[n].getAttribute("data-picture")){for(var i=e[n].getElementsByTagName("span"),a=[],s=0,l=i.length;l>s;s++){var u=i[s].getAttribute("data-media");(!u||o.matchMedia&&o.matchMedia(u).matches)&&a.push(i[s])}var c=e[n].getElementsByTagName("img")[0];if(a.length){var f=a.pop();if(c&&"NOSCRIPT"!==c.parentNode.nodeName){if(f===c.parentNode)continue}else c=o.document.createElement("img"),c.alt=f.getAttribute("data-alt");jQuery.fn.lazyload?(c.getAttribute("data-original")!==f.getAttribute("data-src")&&(c.setAttribute("data-original",f.getAttribute("data-src")),c.setAttribute("alt",f.getAttribute("data-alt"))),f.appendChild(c),$(c).lazyload({placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAJCAYAAAA7KqwyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RkM2N0M4Nzk5M0QzMTFFNDk1NEVDNUNEQzc0NEU2QUMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RkM2N0M4N0E5M0QzMTFFNDk1NEVDNUNEQzc0NEU2QUMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGQzY3Qzg3NzkzRDMxMUU0OTU0RUM1Q0RDNzQ0RTZBQyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGQzY3Qzg3ODkzRDMxMUU0OTU0RUM1Q0RDNzQ0RTZBQyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PjTuprAAAAAaSURBVHjaYvz//z8DJYCJgUIwasCwMAAgwADlXwMPf2Q73AAAAABJRU5ErkJggg==",effect:"fadeIn"})):(c.src=f.getAttribute("data-src"),c.setAttribute("alt",f.getAttribute("data-alt")),f.appendChild(c)),c.setAttribute("class","lazy-loaded")}else c&&c.parentNode.removeChild(c)}},300),a.build=function(){n(),i.on("resize."+r,n).on("orientationchange."+r,n)},a.destroy=function(){i.off("resize."+r).off("orientationchange."+r)},a}}),function(e){define("YTPlayer",["jquery"],function(){return function(){return"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),function(e,t,n){var r=function(e){var t=n.createElement("script"),r=n.getElementsByTagName("head")[0];t.src=location.protocol+"//www.youtube.com/iframe_api",r.appendChild(t),r=null,t=null,o(e)},o=function(n){"undefined"==typeof YT&&"undefined"==typeof t.loadingPlayer?(t.loadingPlayer=!0,t.dfd=e.Deferred(),t.onYouTubeIframeAPIReady=function(){t.onYouTubeIframeAPIReady=null,t.dfd.resolve("done"),n()}):"object"==typeof YT?n():t.dfd.done(function(e){n()})};YTPlayer={player:null,defaults:{ratio:16/9,videoId:"LSmgKRx5pBo",mute:!0,repeat:!0,width:e(t).width(),playButtonClass:"YTPlayer-play",pauseButtonClass:"YTPlayer-pause",muteButtonClass:"YTPlayer-mute",volumeUpClass:"YTPlayer-volume-up",volumeDownClass:"YTPlayer-volume-down",start:0,pauseOnScroll:!1,fitToBackground:!0,playerVars:{modestbranding:1,autoplay:1,controls:0,showinfo:0,wmode:"transparent",branding:0,rel:0,autohide:0,origin:t.location.origin},events:null},init:function(n,o){var i=this;return i.userOptions=o,i.$body=e("body"),i.$node=e(n),i.$window=e(t),i.defaults.events={onReady:function(e){i.onPlayerReady(e),i.options.pauseOnScroll&&i.pauseOnScroll(),"function"==typeof i.options.callback&&i.options.callback.call(this)},onStateChange:function(e){1===e.data?i.$node.addClass("loaded"):0===e.data&&i.options.repeat&&i.player.seekTo(i.options.start)}},i.options=e.extend(!0,{},i.defaults,i.userOptions),i.options.height=Math.ceil(i.options.width/i.options.ratio),i.ID=(new Date).getTime(),i.holderID="YTPlayer-ID-"+i.ID,i.options.fitToBackground?i.createBackgroundVideo():i.createContainerVideo(),i.$window.on("resize.YTplayer"+i.ID,function(){i.resize(i)}),r(i.onYouTubeIframeAPIReady.bind(i)),i.resize(i),i},pauseOnScroll:function(){var e=this;e.$window.on("scroll.YTplayer"+e.ID,function(){var t=e.player.getPlayerState();1===t&&e.player.pauseVideo()}),e.$window.scrollStopped(function(){var t=e.player.getPlayerState();2===t&&e.player.playVideo()})},createContainerVideo:function(){var t=this,n=e('<div id="ytplayer-container'+t.ID+'" >                                    <div id="'+t.holderID+'" class="ytplayer-player"></div>                                     </div>                                     <div id="ytplayer-shield"></div>');t.$node.append(n),t.$YTPlayerString=n,n=null},createBackgroundVideo:function(){var t=this,n=e('<div id="ytplayer-container'+t.ID+'" class="ytplayer-container background">                                    <div id="'+t.holderID+'" class="ytplayer-player"></div>                                    </div>                                    <div id="ytplayer-shield"></div>');t.$node.append(n),t.$YTPlayerString=n,n=null},resize:function(n){var r=e(t);n.options.fitToBackground||(r=n.$node);var o,i,a=r.width(),s=r.height(),l=e("#"+n.holderID);a/n.options.ratio<s?(o=Math.ceil(s*n.options.ratio),l.width(o).height(s).css({left:(a-o)/2,top:0})):(i=Math.ceil(a/n.options.ratio),l.width(a).height(i).css({left:0,top:0})),l=null,r=null},onYouTubeIframeAPIReady:function(){var e=this;e.player=new t.YT.Player(e.holderID,e.options)},onPlayerReady:function(e){this.options.mute&&e.target.mute(),e.target.playVideo()},getPlayer:function(){return this.player},destroy:function(){var n=this;n.$node.removeData("yt-init").removeData("ytPlayer").removeClass("loaded"),n.$YTPlayerString.remove(),e(t).off("resize.YTplayer"+n.ID),e(t).off("scroll.YTplayer"+n.ID),n.$body=null,n.$node=null,n.$YTPlayerString=null,n.player.destroy(),n.player=null}},e.fn.scrollStopped=function(t){var n=e(this),r=this;n.scroll(function(){n.data("scrollTimeout")&&clearTimeout(n.data("scrollTimeout")),n.data("scrollTimeout",setTimeout(t,250,r))})},e.fn.YTPlayer=function(t){return this.each(function(){var n=this;e(n).data("yt-init",!0);var r=Object.create(YTPlayer);r.init(n,t),e.data(n,"ytPlayer",r)})}}(jQuery,window,document),e.YTPlayer=YTPlayer}.apply(e,arguments)})}(this),define("modules/helpers/appStandardized",["apps/master/masterApp"],function(e){"use strict";return function(t,n,r,o){t.startWithParent=!1,t.addInitializer(function(){t.router=new n(o,{controller:r,createTrailingSlashRoutes:!0})}),t.addFinalizer(function(e){this.options=e||{}}),t.on("before:start",function(){e.vent.trigger(o+":starting",t)}),t.on("start",function(){e.vent.trigger(o+":started",t)})}}),define("modules/helpers/controllerIndexHelper",["apps/master/masterApp"],function(e){"use strict";var t=function(e,t){var n={runCount:t,htmlObject:e,collection:new Backbone.Collection};return n},n=function(t,n,r){var o=new r(n);e.main.trigger("page:update",t,o),(n.htmlObject.is500||"terms"===t)&&o.trigger("window:images:loaded"),delete e.bootstrapItems};return function(r,o,i){var a,s,l=new $.Deferred;return _.isFunction(o)?(i=o,s=r):s=o,a=_.isEmpty(e.bootstrapItems)?e.request("services:page:full",s):e.request("services:page:full",s,e.bootstrapItems),$.when(a).fail(function(){var o={title:"500 Error",body:{type:"500",html:e.config.templates.fiveHundred.content},is500:!0},a=t(o,1);a.template=_.template(o.body.html),n(r,a,i)}).then(function(o){var a=t(o,o.runCount);_.isEmpty(e.bootstrapItems)?a.template=_.template(o.wrapper):(a.el="#main__"+r,a.attach=!0),n(r,a,i),l.resolve(!0)}),e.startSubApp(r),l.promise()}});